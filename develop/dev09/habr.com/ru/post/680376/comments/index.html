<!DOCTYPE html>
<html lang="ru" class="no-js">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta content='width=1024' name='viewport'>
<title>Humane API REST Protocol / Хабр</title>

  <meta name="description" content="Здравствуйте, меня зовут Дмитрий Карловский и я… как скульптор, отрезаю всё лишнее, чтобы оставить лишь самую мякотку, которая в наиболее лаконичной и практичной форме решает широкий круг задач. Вот..." />

  <meta name="keywords" content="HARP, REST, OData, GraphQL, API, CRUD, Idempotency, Normal Form, Query, Graph, Tree, JSON, XML, URI" />

  <meta property="fb:app_id" content="444736788986613" />
<meta property="og:type" content="article" />
<meta property="fb:pages" content="472597926099084"/>
<meta property="og:url" content="https://habr.com/ru/post/680376/" />
<meta property="og:title" content="Humane API REST Protocol" />

    <meta property="og:image" content="https://habrastorage.org/webt/r8/s_/sv/r8s_svlrvfjx-ytkv4ukl4eiqkq.png?v=1" />
    <meta property="og:image:width" content="1200"/>
    <meta property="og:image:height" content="630"/>
    <link rel="image_src" href="https://habrastorage.org/webt/r8/s_/sv/r8s_svlrvfjx-ytkv4ukl4eiqkq.png?v=1" />
    <meta name="twitter:image" content="https://habrastorage.org/webt/r8/s_/sv/r8s_svlrvfjx-ytkv4ukl4eiqkq.png?v=1">
    <meta property="aiturec:image" content="https://habrastorage.org/webt/r8/s_/sv/r8s_svlrvfjx-ytkv4ukl4eiqkq.png?v=1">
      <meta property="vk:image"  content="https://habrastorage.org/webt/r8/s_/sv/r8s_svlrvfjx-ytkv4ukl4eiqkq.png&v=1" />
    <meta property="og:image" content="https://habr.com/share/publication/680376/9ab8f19cd3b377d5f5685f74a05e5537/" />
    <link rel="image_src" href="https://habr.com/share/publication/680376/9ab8f19cd3b377d5f5685f74a05e5537/" />
    <meta property="og:image" content="https://habrastorage.org/getpro/habr/post_images/573/33e/4a4/57333e4a424f3ce7bdbc42c2869760eb.png" />
    <link rel="image_src" href="https://habrastorage.org/getpro/habr/post_images/573/33e/4a4/57333e4a424f3ce7bdbc42c2869760eb.png" />
    <meta property="og:image" content="https://habrastorage.org/getpro/habr/post_images/09e/7e3/a72/09e7e3a72515464c7dc2bdd8de4edd18.png" />
    <link rel="image_src" href="https://habrastorage.org/getpro/habr/post_images/09e/7e3/a72/09e7e3a72515464c7dc2bdd8de4edd18.png" />

<meta property="aiturec:title" content="Humane API REST Protocol">
<meta property="aiturec:description" content="Здравствуйте, меня зовут Дмитрий Карловский и я&hellip; как скульптор, отрезаю всё лишнее, чтобы оставить лишь самую мякотку, которая в наиболее лаконичной и практичной...">
<meta property="aiturec:item_id" content="680376">
<meta property="aiturec:datetime" content="2022-08-02T12:05:27+03:00">

<meta property="og:description" content="Здравствуйте, меня зовут Дмитрий Карловский и я&hellip; как скульптор, отрезаю всё лишнее, чтобы оставить лишь самую мякотку, которая в наиболее лаконичной и практичной..." />
<meta name="twitter:description" content="Здравствуйте, меня зовут Дмитрий Карловский и я&hellip; как скульптор, отрезаю всё лишнее, чтобы оставить лишь самую мякотку, которая в наиболее лаконичной и практичной...">
<meta name="twitter:title" content="Humane API REST Protocol" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@habr_com" />

  <meta property="al:android:url" content="habrahabr://post/680376" />
<meta property="al:android:app_name" content="Habrahabr" />
<meta property="al:android:package" content="ru.habrahabr" />
<meta property="al:windows_phone:url" content="habrahabr://post/680376" />
<meta property="al:windows_phone:app_name" content="Habrahabr" />
<meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060" />

  <link rel="canonical" href="https://habr.com/ru/post/680376/"/>
  <link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.habr.com/ru/post/680376/" >


    <script type="application/ld+json">
      {
    "@context": "http:\/\/schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/habr.com\/ru\/post\/680376\/"
    },
    "headline": "Humane API REST Protocol",
    "datePublished": "2022-08-02T12:05:27+03:00",
    "dateModified": "2022-08-03T09:46:31+03:00",
    "author": {
        "@type": "Person",
        "name": "Дмитрий Карловский"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Habr",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"
        }
    },
    "description": "Здравствуйте, меня зовут Дмитрий Карловский и я&hellip; как скульптор, отрезаю всё лишнее, чтобы оставить лишь самую мякотку, которая в наиболее лаконичной и практичной...",
    "url": "https:\/\/habr.com\/ru\/post\/680376\/#post-content-body",
    "about": [
        "h_webdev",
        "h_analysis_design",
        "h_xml",
        "h_api",
        "h_typescript",
        "f_develop"
    ],
    "image": [
        "https:\/\/habrastorage.org\/getpro\/habr\/post_images\/573\/33e\/4a4\/57333e4a424f3ce7bdbc42c2869760eb.png",
        "https:\/\/habrastorage.org\/getpro\/habr\/post_images\/09e\/7e3\/a72\/09e7e3a72515464c7dc2bdd8de4edd18.png"
    ]
}
    </script>


<meta name='yandex-verification' content='71593b225aeafc4e' />
<meta name='referrer' content='unsafe-url' />
<meta name="pocket-site-verification" content="ed24b2b9721edf0a282c5b4a3232c4" />
<meta name="biu" content="https://dr.habracdn.net/habr/oldassets/6411ba2a/images/">

<style type="text/css">
  @font-face{font-family:'Fira Sans';font-style:normal;font-weight:500;src:url(https://dr.habracdn.net/habr/oldassets/6411ba2a/fonts/FiraSans/firaSans-medium.eot);src:local("Fira Sans Medium"),local("FiraSans-Medium"),url(https://dr.habracdn.net/habr/oldassets/6411ba2a/fonts/FiraSans/firaSans-medium.eot?#iefix) format("embedded-opentype"),url(https://dr.habracdn.net/habr/oldassets/6411ba2a/fonts/FiraSans/firaSans-medium.woff2) format("woff2"),url(https://dr.habracdn.net/habr/oldassets/6411ba2a/fonts/FiraSans/firaSans-medium.woff) format("woff"),url(https://dr.habracdn.net/habr/oldassets/6411ba2a/fonts/FiraSans/firaSans-medium.ttf) format("truetype")}
</style>

<link href="https://dr.habracdn.net/habr/oldassets/6411ba2a/styles/main.bundle.css" rel="stylesheet" media="all" />





<meta name='yandex-verification' content='67d46b975fa41645' />

<link rel="apple-touch-icon" sizes="180x180" href="https://dr.habracdn.net/habr/oldassets/6411ba2a/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dr.habracdn.net/habr/oldassets/6411ba2a/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://dr.habracdn.net/habr/oldassets/6411ba2a/images/favicon-16x16.png">
<link rel="manifest" href="https://dr.habracdn.net/habr/oldassets/6411ba2a/site.webmanifest">
<link rel="mask-icon" href="https://dr.habracdn.net/habr/oldassets/6411ba2a/images/safari-pinned-tab.svg" color="#77a2b6">
<meta name="application-name" content="Хабр"/>
<meta name="msapplication-TileColor" content="#77a2b6">
<meta name="theme-color" content="#77a2b6">


  <link title="Комментарии к публикации «Humane API REST Protocol»" type="application/rss+xml" rel="alternate" href="https://habr.com/ru/rss/post/680376/"/>

<script>/* Font Face Observer v2.0.13 - © Bram Stein. License: BSD-3-Clause */(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());

(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function r(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function t(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var B=null,C=null,E=null,F=null;function G(){if(null===C)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);C=!!a&&603>parseInt(a[1],10)}else C=!1;return C}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
A.prototype.load=function(a,b){var c=this,k=a||"BESbswy",q=0,D=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=D?b():document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),N=new Promise(function(a,c){q=setTimeout(c,D)});Promise.race([N,M]).then(function(){clearTimeout(q);a(c)},function(){b(c)})}else m(function(){function u(){var b;if(b=-1!=
f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==v&&g==v&&h==v||f==w&&g==w&&h==w||f==x&&g==x&&h==x)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(q),a(c))}function I(){if((new Date).getTime()-H>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,
g=n.a.offsetWidth,h=p.a.offsetWidth,u();q=setTimeout(I,50)}}var e=new r(k),n=new r(k),p=new r(k),f=-1,g=-1,h=-1,v=-1,w=-1,x=-1,d=document.createElement("div");d.dir="ltr";t(e,L(c,"sans-serif"));t(n,L(c,"serif"));t(p,L(c,"monospace"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);v=e.a.offsetWidth;w=n.a.offsetWidth;x=p.a.offsetWidth;I();z(e,function(a){f=a;u()});t(e,L(c,'"'+c.family+'",sans-serif'));z(n,function(a){g=a;u()});t(n,L(c,'"'+c.family+'",serif'));
z(p,function(a){h=a;u()});t(p,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

(function( w ){
if( w.document.documentElement.className.indexOf( "fonts-loaded" ) > -1 ){ return; }

var html = document.documentElement;
var FS500 = new w.FontFaceObserver("Fira Sans", { weight: 500 });

FS500.load().then(function() {
html.classList.add('fonts-loaded');
sessionStorage.fontsLoaded = true;
console.log('FS500-loaded');
}).catch(function () {
sessionStorage.fontsLoaded = false;
console.log('FS500-unloaded');
});

if (sessionStorage.fontsLoaded) {
html.classList.add('fonts-loaded');
}
}(this));
</script>
<script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/libs/jquery-1.8.3.min.js"></script>
<script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/libs/chance.min.js"></script>
<script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/libs/html2canvas.min.js"></script>
<script>
  window.create_callback_for_blocked = function(key) {
    return function() {
      googletag.cmd.push(function () {
        googletag.display(key);
      });
    }
  }

  window.habr_blockers_checker = new function() {
    var result;
    var callbacksQueue = [];
    var calledOnce = false;

    function fireCallbacks() {
      callbacksQueue.forEach(function(callback) {
        callback(result);
      });
      callbacksQueue = [];
    }

    this.detect = function(imgUrl, callback) {
      var checksRemain = 2;
      var detected = false;
      var error1 = false;
      var error2 = false;

      if (typeof callback !== 'function') {
        return;
      };

      callbacksQueue.push(callback);

      if (typeof result !== 'undefined') {
        fireCallbacks();
      };

      if (calledOnce) {
        return;
      }
      calledOnce = true;

      imgUrl += '?ch=*&rn=*';

      function beforeCheck(timeout) {
        if (checksRemain === 0 || timeout > 1E3) {
          result = checksRemain === 0 && detected;
          fireCallbacks();
        } else {
          setTimeout(function() {
            beforeCheck(timeout * 2)
          }, timeout * 2);
        }
      }

      function checkImages() {
        if (--checksRemain) {
          return;
        };
        detected = !error1 && error2;
      }

      var random = Math.random() * 11;

      var img1 = new Image;
      img1.onload = checkImages;
      img1.onerror = function() {
        error1 = true;
        checkImages()
      };
      img1.src = imgUrl.replace(/\*/, 1).replace(/\*/, random);

      var img2 = new Image;
      img2.onload = checkImages;
      img2.onerror = function() {
        error2 = true;
        checkImages()
      };
      img2.src = imgUrl.replace(/\*/, 2).replace(/\*/, random);

      beforeCheck(250, callback)
    };

    this.detectWrapper = function(callback) {
      return this.detect('/images/px.gif', callback);
    };
  };

  window.display_dfp_slot = function(key) {
    if (window.habr_blockers_checker) {
      window.habr_blockers_checker.detectWrapper(window.create_callback_for_blocked(key));
    } else {
      window.create_callback_for_blocked(key)();
    }
  };
</script>


<script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/libs/raven.min.js"></script>
<script>Raven.config('https://9d127adffe724363a380a189afcdb015@sentry.srv.habr.com/11', {
  maxBreadcrumbs: 50,
  sampleRate: 0.5,
  whitelistUrls: [/https?:\/\/((www)\.)?(m\.)?habr\.com/],
}).install()</script>

<script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/_parts/advertise.js"></script>
<script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/_parts/adriver.js"></script>


  </head>

  <body class="nl">

    <div class="layout">
      <div class="layout__row layout__row_services">
        <div id="TMpanel">
  <div class="container">
    <div class="logo-wrapper">
      <a href="https://habr.com/ru/" class="logo" title="">
          <svg width="62" height="24" viewBox="0 0 62 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M16.875 19L11.075 10.225L16.825 1.4H12.6L8.75 7.4L4.94999 1.4H0.574994L6.32499 10.15L0.524994 19H4.79999L8.64999 12.975L12.525 19H16.875Z" />
    <path d="M24.2607 5.775C20.8857 5.775 18.9607 7.625 18.6107 9.85H22.0107C22.2107 9.175 22.8607 8.6 24.1107 8.6C25.3357 8.6 26.2357 9.225 26.2357 10.425V11.025H23.4107C20.1107 11.025 18.1107 12.55 18.1107 15.2C18.1107 17.8 20.1107 19.3 22.6107 19.3C24.2857 19.3 25.6357 18.65 26.4357 17.6V19H29.8107V10.55C29.8107 7.4 27.5857 5.775 24.2607 5.775ZM23.6107 16.475C22.4857 16.475 21.7607 15.925 21.7607 15.025C21.7607 14.1 22.5607 13.55 23.6857 13.55H26.2357V14.125C26.2357 15.625 25.0107 16.475 23.6107 16.475Z" />
    <path d="M39.925 6.3C38.125 6.3 36.65 6.95 35.7 8.275C35.95 5.85 36.925 4.65 39.375 4.275L44.3 3.55V0.375L39.025 1.25C33.925 2.1 32.35 5.5 32.35 11.175C32.35 16.275 34.825 19.3 39.2 19.3C43.125 19.3 45.55 16.3 45.55 12.7C45.55 8.825 43.3 6.3 39.925 6.3ZM39.025 16.25C37.125 16.25 36.075 14.725 36.075 12.675C36.075 10.7 37.175 9.275 39.05 9.275C40.875 9.275 41.9 10.75 41.9 12.7C41.9 14.65 40.9 16.25 39.025 16.25Z" />
    <path d="M55.2855 5.775C53.3855 5.775 52.1605 6.6 51.5105 7.575V6.075H48.0105V23.775H51.6605V17.75C52.3105 18.65 53.5355 19.3 55.1855 19.3C58.3605 19.3 60.8855 16.8 60.8855 12.55C60.8855 8.225 58.3605 5.775 55.2855 5.775ZM54.4105 16.15C52.7105 16.15 51.5855 14.775 51.5855 12.6V12.5C51.5855 10.325 52.7105 8.925 54.4105 8.925C56.1105 8.925 57.2105 10.35 57.2105 12.55C57.2105 14.75 56.1105 16.15 54.4105 16.15Z" />
</svg>

      </a>
      

        <span class="projects-dropdown" id="dropdown-control">
          <svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M5.70711 5.70711C5.31658 6.09763 4.68342 6.09763 4.29289 5.70711L0.292892 1.70711C-0.097632 1.31658 -0.0976319 0.683417 0.292892 0.292893C0.683417 -0.0976308 1.31658 -0.0976308 1.70711 0.292893L5 3.58579L8.29289 0.292894C8.68342 -0.0976301 9.31658 -0.0976301 9.70711 0.292894C10.0976 0.683418 10.0976 1.31658 9.70711 1.70711L5.70711 5.70711Z" />
</svg>

        </span>
        <div class="dropdown hidden" id="dropdown">
          <div class="dropdown-heading">
            Все сервисы Хабра
          </div>
          <a class="service" href="/">
            <div class="service-title">
              <svg width="52" height="22" viewBox="0 0 52 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.86 17.0001L8.514 9.23405L13.816 1.51205H11.528L7.26 7.76005L2.97 1.51205H0.659997L5.984 9.19005L0.615997 17.0001H2.926L7.194 10.6861L11.528 17.0001H13.86Z" fill="#333333"/>
                <path d="M20.181 5.67005C17.651 5.67005 16.111 7.10005 15.759 8.81605H17.585C17.893 8.00205 18.685 7.34205 20.137 7.34205C21.567 7.34205 22.645 8.11205 22.645 9.65205V10.4001H19.697C16.991 10.4001 15.341 11.6981 15.341 13.8321C15.341 15.9441 17.013 17.2421 19.169 17.2421C20.577 17.2421 21.897 16.7141 22.733 15.6801V17.0001H24.515V9.65205C24.515 7.16605 22.777 5.67005 20.181 5.67005ZM19.411 15.5921C18.179 15.5921 17.255 14.9761 17.255 13.8101C17.255 12.6221 18.289 12.0061 19.807 12.0061H22.645V12.8201C22.645 14.5141 21.171 15.5921 19.411 15.5921Z" fill="#333333"/>
                <path d="M32.9685 5.91205C31.2965 5.91205 29.9545 6.55005 29.1185 7.78205C29.3825 5.27405 30.3945 3.88805 32.9025 3.42605L36.9505 2.67805V0.852051L32.5065 1.75405C28.7665 2.52405 27.2045 4.96605 27.2045 10.5101C27.2045 14.8001 29.4045 17.2421 32.7925 17.2421C36.0265 17.2421 38.0505 14.7121 38.0505 11.5441C38.0505 7.91405 35.8285 5.91205 32.9685 5.91205ZM32.7045 15.5261C30.6145 15.5261 29.2065 13.9641 29.2065 11.4561C29.2065 8.97005 30.7685 7.60605 32.7265 7.60605C34.7725 7.60605 36.1145 9.23405 36.1145 11.5441C36.1145 13.8541 34.7945 15.5261 32.7045 15.5261Z" fill="#333333"/>
                <path d="M46.1431 5.67005C44.2291 5.67005 43.0631 6.55005 42.5131 7.49605V5.91205H40.6871V21.2021H42.5791V15.6361C43.1071 16.4501 44.2951 17.2421 46.0771 17.2421C48.6291 17.2421 51.1371 15.3721 51.1371 11.4561C51.1371 7.56205 48.6511 5.67005 46.1431 5.67005ZM45.9011 15.5261C43.8551 15.5261 42.5131 13.9641 42.5131 11.5001V11.4121C42.5131 8.94805 43.8551 7.38605 45.9011 7.38605C47.8811 7.38605 49.2011 9.03605 49.2011 11.4561C49.2011 13.8761 47.8811 15.5261 45.9011 15.5261Z" fill="#333333"/>
              </svg>
            </div>
            <p class="service-description">
              Сообщество IT-специалистов
            </p>
          </a>
          <a class="service" href="https://qna.habr.com?utm_source=habr&utm_medium=habr_top_panel">
            <h4 class="service-title">
            <svg width="46" height="18" viewBox="0 0 46 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M14.4 8.25602C14.4 3.65802 11.606 0.27002 7.27201 0.27002C2.93801 0.27002 0.144012 3.65802 0.144012 8.25602C0.144012 12.854 2.93801 16.242 7.27201 16.242C8.41601 16.242 9.45001 16.022 10.352 15.604L11.518 17.342H13.696L11.848 14.614C13.476 13.184 14.4 10.918 14.4 8.25602ZM7.27201 14.416C4.10401 14.416 2.14601 11.864 2.14601 8.25602C2.14601 4.64802 4.10401 2.09602 7.27201 2.09602C10.44 2.09602 12.398 4.64802 12.398 8.25602C12.398 10.236 11.826 11.908 10.77 12.986L9.64801 11.314H7.47001L9.29601 14.02C8.70201 14.284 8.02001 14.416 7.27201 14.416Z" fill="#333333"/>
              <path d="M30.965 16L27.973 12.766L30.921 9.11402H28.699L26.829 11.534L23.331 7.77202C25.377 6.80402 26.455 5.59402 26.455 3.85602C26.455 1.78802 24.871 0.27002 22.583 0.27002C20.207 0.27002 18.535 1.89802 18.535 3.87802C18.535 5.19802 19.305 6.12202 20.163 7.00202L20.427 7.26602C17.985 8.25602 16.753 9.73002 16.753 11.732C16.753 14.196 18.667 16.242 21.835 16.242C23.749 16.242 25.311 15.494 26.565 14.24L26.763 14.042L28.567 16H30.965ZM22.539 1.92002C23.705 1.92002 24.629 2.62402 24.629 3.83402C24.629 5.00002 23.793 5.90202 22.187 6.62802L21.571 6.01202C21.109 5.55002 20.405 4.82402 20.405 3.81202C20.405 2.66802 21.329 1.92002 22.539 1.92002ZM21.945 14.504C19.877 14.504 18.755 13.316 18.755 11.666C18.755 10.258 19.591 9.20202 21.593 8.43202L25.641 12.832L25.509 12.964C24.541 13.976 23.309 14.504 21.945 14.504Z" fill="#333333"/>
              <path d="M43.5619 16H45.6739L39.8219 0.512019H37.7979L31.9459 16H34.0579L35.5539 11.908H42.0439L43.5619 16ZM38.7879 2.97602L41.3839 10.104H36.2139L38.7879 2.97602Z" fill="#333333"/>
            </svg>
            </h4>
            <p class="service-description">
              Ответы на&nbsp;любые вопросы об&nbsp;IT
            </p>
          </a>
          <a class="service" href="https://career.habr.com?utm_source=habr&utm_medium=habr_top_panel">
            <div class="service-title">
            <svg width="84" height="21" viewBox="0 0 84 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12.442 16L4.96201 7.92596L12.31 0.511963H9.78001L2.894 7.41996V0.511963H0.936005V16H2.894V8.60796L9.84601 16H12.442Z" fill="#333333"/>
              <path d="M18.3646 4.66996C15.8346 4.66996 14.2946 6.09996 13.9426 7.81596H15.7686C16.0766 7.00196 16.8686 6.34196 18.3206 6.34196C19.7506 6.34196 20.8286 7.11196 20.8286 8.65196V9.39996H17.8806C15.1746 9.39996 13.5246 10.698 13.5246 12.832C13.5246 14.944 15.1966 16.242 17.3526 16.242C18.7606 16.242 20.0806 15.714 20.9166 14.68V16H22.6986V8.65196C22.6986 6.16596 20.9606 4.66996 18.3646 4.66996ZM17.5946 14.592C16.3626 14.592 15.4386 13.976 15.4386 12.81C15.4386 11.622 16.4726 11.006 17.9906 11.006H20.8286V11.82C20.8286 13.514 19.3546 14.592 17.5946 14.592Z" fill="#333333"/>
              <path d="M31.3501 4.66996C29.4361 4.66996 28.2701 5.54996 27.7201 6.49596V4.91196H25.8941V20.202H27.7861V14.636C28.3141 15.45 29.5021 16.242 31.2841 16.242C33.8361 16.242 36.3441 14.372 36.3441 10.456C36.3441 6.56196 33.8581 4.66996 31.3501 4.66996ZM31.1081 14.526C29.0621 14.526 27.7201 12.964 27.7201 10.5V10.412C27.7201 7.94796 29.0621 6.38596 31.1081 6.38596C33.0881 6.38596 34.4081 8.03596 34.4081 10.456C34.4081 12.876 33.0881 14.526 31.1081 14.526Z" fill="#333333"/>
              <path d="M43.3561 8.49796H40.8701V4.91196H38.9781V16H43.3341C45.7101 16 47.2501 14.372 47.2501 12.216C47.2501 10.06 45.7101 8.49796 43.3561 8.49796ZM43.1141 14.328H40.8701V10.17H43.1141C44.5661 10.17 45.3581 11.028 45.3581 12.216C45.3581 13.404 44.5661 14.328 43.1141 14.328Z" fill="#333333"/>
              <path d="M59.1788 11.028V10.06C59.1788 6.75996 57.2868 4.66996 54.3388 4.66996C51.3028 4.66996 49.1248 6.86996 49.1248 10.456C49.1248 14.02 51.2808 16.242 54.4928 16.242C57.3748 16.242 58.7608 14.438 59.0468 13.14H57.1328C56.9348 13.712 56.0548 14.548 54.5148 14.548C52.4688 14.548 51.1048 13.052 51.1048 11.072V11.028H59.1788ZM54.2948 6.36396C56.0768 6.36396 57.1768 7.50796 57.2648 9.42196H51.1268C51.2808 7.59596 52.4468 6.36396 54.2948 6.36396Z" fill="#333333"/>
              <path d="M67.272 4.66996C65.358 4.66996 64.192 5.54996 63.642 6.49596V4.91196H61.816V20.202H63.708V14.636C64.236 15.45 65.424 16.242 67.206 16.242C69.758 16.242 72.266 14.372 72.266 10.456C72.266 6.56196 69.78 4.66996 67.272 4.66996ZM67.03 14.526C64.984 14.526 63.642 12.964 63.642 10.5V10.412C63.642 7.94796 64.984 6.38596 67.03 6.38596C69.01 6.38596 70.33 8.03596 70.33 10.456C70.33 12.876 69.01 14.526 67.03 14.526Z" fill="#333333"/>
              <path d="M79.058 4.66996C76.528 4.66996 74.988 6.09996 74.636 7.81596H76.462C76.77 7.00196 77.562 6.34196 79.014 6.34196C80.444 6.34196 81.522 7.11196 81.522 8.65196V9.39996H78.574C75.868 9.39996 74.218 10.698 74.218 12.832C74.218 14.944 75.89 16.242 78.046 16.242C79.454 16.242 80.774 15.714 81.61 14.68V16H83.392V8.65196C83.392 6.16596 81.654 4.66996 79.058 4.66996ZM78.288 14.592C77.056 14.592 76.132 13.976 76.132 12.81C76.132 11.622 77.166 11.006 78.684 11.006H81.522V11.82C81.522 13.514 80.048 14.592 78.288 14.592Z" fill="#333333"/>
            </svg>
            </div>
            <p class="service-description">
              Профессиональное развитие в&nbsp;IT
            </p>
          </a>
          <a class="service" href="https://freelance.habr.com?utm_source=habr&utm_medium=habr_top_panel">
            <div class="service-title">
            <svg width="91" height="21" viewBox="0 0 91 21" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.032 1.65602V0.0720215H7.118V1.65602C3.268 1.72202 0.0339966 4.01002 0.0339966 8.16802C0.0339966 12.304 3.268 14.592 7.118 14.658V16.242H9.032V14.658C12.882 14.592 16.116 12.304 16.116 8.16802C16.116 4.01002 12.882 1.72202 9.032 1.65602ZM7.118 12.898C4.082 12.832 2.014 11.05 2.014 8.16802C2.014 5.26402 4.082 3.48202 7.118 3.41602V12.898ZM9.032 12.898V3.41602C12.068 3.48202 14.136 5.26402 14.136 8.16802C14.136 11.05 12.068 12.832 9.032 12.898Z" fill="#333333"/>
              <path d="M24.2603 4.67002C22.3463 4.67002 21.1803 5.55002 20.6303 6.49602V4.91202H18.8043V20.202H20.6963V14.636C21.2243 15.45 22.4123 16.242 24.1943 16.242C26.7463 16.242 29.2543 14.372 29.2543 10.456C29.2543 6.56202 26.7683 4.67002 24.2603 4.67002ZM24.0183 14.526C21.9723 14.526 20.6303 12.964 20.6303 10.5V10.412C20.6303 7.94802 21.9723 6.38602 24.0183 6.38602C25.9983 6.38602 27.3183 8.03602 27.3183 10.456C27.3183 12.876 25.9983 14.526 24.0183 14.526Z" fill="#333333"/>
              <path d="M39.4123 4.91202L33.7583 13.074V4.91202H31.8883V16H33.7583L39.4123 7.83802V16H41.2823V4.91202H39.4123Z" fill="#333333"/>
              <path d="M46.0815 4.91202L45.5095 11.71C45.3555 13.624 44.9595 14.328 43.5735 14.328H43.2655V16.044H43.7935C46.0595 16.044 47.0935 14.856 47.3355 11.842L47.7755 6.60602H51.8455V16H53.7375V4.91202H46.0815Z" fill="#333333"/>
              <path d="M61.2045 4.67002C58.6745 4.67002 57.1345 6.10002 56.7825 7.81602H58.6085C58.9165 7.00202 59.7085 6.34202 61.1605 6.34202C62.5905 6.34202 63.6685 7.11202 63.6685 8.65202V9.40002H60.7205C58.0145 9.40002 56.3645 10.698 56.3645 12.832C56.3645 14.944 58.0365 16.242 60.1925 16.242C61.6005 16.242 62.9205 15.714 63.7565 14.68V16H65.5385V8.65202C65.5385 6.16602 63.8005 4.67002 61.2045 4.67002ZM60.4345 14.592C59.2025 14.592 58.2785 13.976 58.2785 12.81C58.2785 11.622 59.3125 11.006 60.8305 11.006H63.6685V11.82C63.6685 13.514 62.1945 14.592 60.4345 14.592Z" fill="#333333"/>
              <path d="M76.104 4.91202V9.37802H70.626V4.91202H68.734V16H70.626V11.094H76.104V16H77.996V4.91202H76.104Z" fill="#333333"/>
              <path d="M85.9003 14.526C83.8983 14.526 82.5783 12.876 82.5783 10.456C82.5783 8.05802 83.8543 6.38602 85.8783 6.38602C87.6383 6.38602 88.4523 7.53002 88.7383 8.45402H90.6303C90.3443 6.69402 88.8263 4.67002 85.8783 4.67002C82.6883 4.67002 80.6423 7.13402 80.6423 10.456C80.6423 13.844 82.7323 16.242 85.8783 16.242C88.6283 16.242 90.3883 14.394 90.6303 12.414H88.7383C88.4963 13.36 87.7483 14.526 85.9003 14.526Z" fill="#333333"/>
            </svg>
            </div>
            <p class="service-description">
              Удаленная работа для IT-специалистов
            </p>
          </a>
        </div>
    </div>
    <div class="bmenu">
      <a
        class="bmenu__conversion"
        href="https://habr.com/sandbox/start/"
        onclick="if (typeof ga === 'function') { ga('send', 'event', 'habr_top_panel', 'become_an_author'); }"
      >Как стать автором</a>

      <a
        id="feature-effect"
        class="bmenu__theme"
        style="display: none;"
        target="_blank"
      >
        <img alt="" width="20" style="position:relative; vertical-align: middle; top: -2px; margin-right: 4px;" />
        <span class="bmenu__text"></span>
      </a>
    </div>

      <div id="megapost-head-effect" class="bmenu_inner" style="display:flex!important;visibility:visible!important;">
  <span class="bmenu slink">
  </span>
</div>

  </div>
</div>

<script>
  var dropdown = document.querySelector('#dropdown');
  var dropdownControl = document.querySelector('#dropdown-control');
  var logoWrapper = document.querySelector('.logo-wrapper');

  document.addEventListener('click', function(e) {
      if (dropdown) {
        var isClickInside = logoWrapper.contains(e.target);
        var dropdownClosed = dropdown.classList.contains('hidden');
        if (!isClickInside && !dropdownClosed) {
          dropdown.classList.add('hidden');
          dropdownControl.classList.remove('reverted');
        }
      }
  });
  if (dropdownControl) {
    dropdownControl.onclick = function () {
      dropdown.classList.toggle('hidden');
      dropdownControl.classList.toggle('reverted');
    }
  }
</script>

      </div>

      <div class="layout__row layout__row_navbar">
        <div class="layout__cell">
          <div class="main-navbar">
  <div class="main-navbar__section main-navbar__section_left">
    <ul class="nav-links" id="navbar-links">
    <li class="nav-links__item">
      <a href="https://habr.com/ru/top/" class="nav-links__item-link ">Все потоки</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/develop/" class="nav-links__item-link ">Разработка</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/admin/" class="nav-links__item-link ">Администрирование</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/design/" class="nav-links__item-link ">Дизайн</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/management/" class="nav-links__item-link ">Менеджмент</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/marketing/" class="nav-links__item-link ">Маркетинг</a>
    </li>
    <li class="nav-links__item">
      <a href="https://habr.com/ru/flows/popsci/" class="nav-links__item-link ">Научпоп</a>
    </li>
</ul>

    <form action="https://habr.com/ru/search/#h" method="get" class="search-form" id="search-form">
  <button type="button" class="btn btn_navbar_search icon-svg_search" id="search-form-btn" title="Поиск по сайту">
    <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 11C17 14.3137 14.3137 17 11 17C7.68629 17 5 14.3137 5 11C5 7.68629 7.68629 5 11 5C14.3137 5 17 7.68629 17 11ZM15.5838 17.5574C14.2857 18.4665 12.7051 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11C19 12.9998 18.2662 14.8282 17.0533 16.2307C17.0767 16.2502 17.0994 16.2709 17.1214 16.2929L20.4143 19.5858C20.8048 19.9763 20.8048 20.6095 20.4143 21C20.0238 21.3905 19.3906 21.3905 19.0001 21L15.7072 17.7071C15.6605 17.6604 15.6194 17.6102 15.5838 17.5574Z" />
</svg>

  </button>
  <label class="search-form__field-wrapper">
    <input type="text" name="q" class="search-form__field" id="search-form-field" placeholder="Поиск" tabindex="-1"/>
    <button type="button" class="btn btn_search-close" id="search-form-clear" title="Закрыть">
      <svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"/></svg>

    </button>
  </label>
</form>

  </div>

  <div class="main-navbar__section main-navbar__section_right">
      <button type="button" class="btn btn_medium btn_navbar_lang js-show_lang_settings">
        <svg class="icon-svg" width="18" height="18">
          <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#globus-v2" />
        </svg>
      </button>
      <a href="https://habr.com/ru/auth/login/" id="login" class="btn btn_medium btn_navbar_login">Войти</a>
      <a href="https://habr.com/ru/auth/register/" class="btn btn_medium btn_navbar_registration">Регистрация</a>


  </div>
</div>

        </div>
      </div>

      <div class="layout__row layout__row_body">
        <div class="layout__cell layout__cell_body">
          
            
  
  
  <section class="column-wrapper column-wrapper_post js-sticky-wrapper">
    <div class="content_left js-content_left">
      
    <article class="post post_full" id="post_680376" lang="ru">
  <div class="post__wrapper">
    <header class="post__meta">
        <a href="https://habr.com/ru/users/nin-jin/" class="post__user-info user-info" title="Автор публикации">
            <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" width="24" height="24" class="user-info__image-pic user-info__image-pic_small">
          <span class="user-info__nickname user-info__nickname_small">nin-jin</span>
        </a>
      <span class="post__time" data-time_published="2022-08-02T09:05Z">2 августа 2022 в 12:05</span>

      
    </header>

    <h1 class="post__title post__title_full">
      <span class="post__title-text">Humane API REST Protocol</span>
    </h1>

      <div class="post__translatation">
        <a href="https://dev.to/ninjin/humane-api-rest-protocol-n85" class="post__translatation-link" title="Автор оригинала: Jin" target="_blank">Автор оригинала: Jin</a>
      </div>

      <ul class="post__hubs post__hubs_full-post inline-list">
            <li class="inline-list__item inline-list__item_hub">
              <a href="https://habr.com/ru/hub/webdev/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Разработка веб-сайтов'); }">Разработка веб-сайтов</a>, 
            </li>
            <li class="inline-list__item inline-list__item_hub">
              <a href="https://habr.com/ru/hub/analysis_design/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Анализ и проектирование систем'); }">Анализ и проектирование систем</a>, 
            </li>
            <li class="inline-list__item inline-list__item_hub">
              <a href="https://habr.com/ru/hub/xml/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'XML'); }">XML</a>, 
            </li>
            <li class="inline-list__item inline-list__item_hub">
              <a href="https://habr.com/ru/hub/api/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'API'); }">API</a>, 
            </li>
            <li class="inline-list__item inline-list__item_hub">
              <a href="https://habr.com/ru/hub/typescript/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'TypeScript'); }">TypeScript</a>
            </li>
      </ul>

    <ul class="post__marks inline-list">
    <li class="inline-list__item inline-list__item_post-type">
      <span class="post__type-label" title="Перевод">Перевод</span>
    </li>
</ul>

    <div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body"><p>Здравствуйте, меня зовут Дмитрий Карловский и я… как скульптор, отрезаю всё лишнее, чтобы оставить лишь самую мякотку, которая в наиболее лаконичной и практичной форме решает широкий круг задач. Вот лишь несколько спроектированных мною вещей:</p><br>
<ul>
<li><a href="https://habhub.hyoo.ru/#!author=nin-jin/repo=HabHub/article=39" rel="nofollow noopener noreferrer">MarkedText</a> — стройный легковесный язык разметки текста (убийца MarkDown).</li>
<li><a href="https://github.com/nin-jin/slides/tree/master/tree" rel="nofollow noopener noreferrer">Tree</a> — структурированный формат представления данных (убийца JSON и XML).</li>
</ul><br>
<p>На этот же раз мы спроектируем удобный клиент-серверный <a href="https://ru.wikipedia.org/wiki/API" rel="nofollow noopener noreferrer">API</a>, призванный убрать кровавую пелену с глаз фронтендеров и стальные мозоли с пальцев бэкендеров..</p><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Architecture</strong></td>
<td>✅REST</td>
<td>✅REST</td>
<td>❌RPC</td>
</tr>
<tr>
<td>Common <strong>uri query string</strong> compatible</td>
<td>⭕Back</td>
<td>✅Full</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Single line</strong> query</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Pseudo-static</strong> compatible</td>
<td>⭕Back</td>
<td>⭕Partial</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Same model</strong> of request and response</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>File name</strong> compatible</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Web Tools</strong> Friendly</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
<tr>
<td>Data <strong>filtering</strong></td>
<td>✅</td>
<td>✅</td>
<td>⭕Unspec</td>
</tr>
<tr>
<td>Data <strong>sorting</strong></td>
<td>✅</td>
<td>✅</td>
<td>⭕Unspec</td>
</tr>
<tr>
<td>Data <strong>slicing</strong></td>
<td>✅</td>
<td>✅</td>
<td>⭕Unspec</td>
</tr>
<tr>
<td>Data <strong>aggregation</strong></td>
<td>✅</td>
<td>✅</td>
<td>⭕Unspec</td>
</tr>
<tr>
<td><strong>Deep</strong> fetch</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><strong>Limited</strong> logic</td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
</tr>
<tr>
<td><strong>Metadata</strong> query</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
<tr>
<td><strong>Idempotent</strong> requests</td>
<td>✅Full</td>
<td>⭕Partial</td>
<td>❌Undef</td>
</tr>
<tr>
<td><strong>Normalized</strong> response</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table></div><a name="habracut"></a><br>
<h1 id="application-programming-interface">Application Programming Interface</h1><br>
<p>Архитектурно можно выделить три основных подхода: <a href="https://ru.wikipedia.org/wiki/%D0%A3%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B2%D1%8B%D0%B7%D0%BE%D0%B2_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D0%B4%D1%83%D1%80" rel="nofollow noopener noreferrer">RPC</a>, <a href="https://ru.wikipedia.org/wiki/REST" rel="nofollow noopener noreferrer">REST</a> и протоколы синхронизации. Разберём их подробнее..</p><br>
<h2 id="remote-procedure-call">Remote Procedure Call</h2><br>
<p>Тут мы сначала выбираем какую процедуру вызвать. Потом передаём на сервер её имя и аргументы. Сервер её выполняет и возвращает результат.</p><br>
<p>Известные примеры RPC протоколов:</p><br>
<ul>
<li><a href="http://xmlrpc.com/" rel="nofollow noopener noreferrer">XML RPC</a></li>
<li><a href="https://www.jsonrpc.org/" rel="nofollow noopener noreferrer">JSON RPC</a></li>
<li><a href="https://graphql.org/" rel="nofollow noopener noreferrer">GraphQL</a></li>
</ul><br>
<p>Общей особенностью таких протоколов является огромное число процедур с уникальными сигнатурами, для каждой из которых нужна документация и поддержка в коде (<a href="https://docs.github.com/en/graphql/reference/mutations" rel="nofollow noopener noreferrer">пример</a>). Как следствие, подобные протоколы весьма сложны в поддержке, а использование сопряжено с постоянным штудированием документации.</p><br>
<p>Другой особенностью является невозможность кеширования запросов на прокси, так как они не имеют информации о том, что и как можно кешировать.</p><br>
<h2 id="representational-state-transfer">REpresentational State Transfer</h2><br>
<p>Тут идея в том, чтобы выделить объекты с которыми можно взаимодействовать (ресурсы), стандартизировать их идентификаторы (<a href="https://ru.wikipedia.org/wiki/URI" rel="nofollow noopener noreferrer">URI</a>) и процедуры для взаимодействия с ними (<a href="https://ru.wikipedia.org/wiki/HTTP#%D0%9C%D0%B5%D1%82%D0%BE%D0%B4%D1%8B" rel="nofollow noopener noreferrer">методы</a>). Число типов ресурсов получается таким образом в несколько раз меньше, чем число процедур в случае RPC, что существенно проще в использовании человеком.</p><br>
<p>Известные примеры REST протоколов:</p><br>
<ul>
<li><a href="http://webdav.org/" rel="nofollow noopener noreferrer">WebDAV</a></li>
<li><a href="https://www.odata.org/" rel="nofollow noopener noreferrer">OData</a></li>
<li><a href="https://jsonapi.org/" rel="nofollow noopener noreferrer">JSON:API</a></li>
</ul><br>
<p>Так как число REST методов весьма ограничено и каждый имеет чёткую семантику, то становится довольно легко писать приложения, умеющие работать с любыми (даже заранее не известными) ресурсами (<a href="https://http.hyoo.ru/#!uri=https%3A%2F%2Fapi.github.com%2Frepos%2Fnin-jin%2Fhabhub%2Fissues/headers=Accept%3A%20application%2Fvnd.github.raw%2Bjson" rel="nofollow noopener noreferrer">пример</a>), понимающими как их читать, обновлять, кешировать и тд.</p><br>
<h2 id="synchronization-protocols">Synchronization protocols</h2><br>
<p>Тут на уровне протокола вообще нет методов, а узлы сети просто обмениваются дельтами внесённых локально изменений. Эти виды протоколов характерны для децентрализованных систем, поддерживающих работу в оффлайне. Известные представители данного типа протоколов… мне не известны. Но сейчас я разрабатываю один из таких, который вскоре перевернёт весь мир. Но пока что мы остановимся на чём-то более традиционном — REST..</p><br>
<h1 id="architecture">Architecture</h1><br>
<p>Прежде чем браться за детали протокола, давайте определимся с архитектурными ограничениями, на которые мы будем ориентироваться..</p><br>
<h2 id="pseudo-static">Pseudo-Static</h2><br>
<p>Важно отметить, что REST — это совсем не про URI похожие на пути к файлам вида:</p><br>
<pre><code class="plaintext">/users/jin/chats/123/messages/456/likes.json
/organizations/hyoo/chats/123/messages/456/likes.json</code></pre><br>
<p>Эти две ссылки фактически ссылаются на один и тот же ресурс. То есть первая же проблема с ними — выбор каноничной ссылки из множества вариантов.</p><br>
<p>Другая проблема заключается в том, что нам необходимо знать информацию о всём пути, которой у нас может и не быть. Например, есть у нас идентификатор сообщения, но мы не можем получить его лайки так как не знаем идентификаторов чата и организации.</p><br>
<p>Следующая проблема — раздутие размера из-за избыточной информации, что приводит либо к переносу на несколько строк в случайных местах, либо вообще к обрезанию.</p><br>
<p>Наконец, при переносе чата, например, в другую организацию, ссылки на все сообщения вдруг поменяются, а пришедший по старым ссылкам пользователь зачастую увидит издевательски красивую страницу 404. Если разработчик, конечно, не запарился серьёзно над редиректами.</p><br>
<p>Резюмируя: <strong>URI должен содержать лишь минимально необходимую информацию для идентификации самого ресурса, но не его положение в той или иной иерархии.</strong></p><br>
<h2 id="create-read-update-delete">Create Read Update Delete</h2><br>
<p>Не менее важно отметить, что REST не только и не столько про CRUD, не смотря на то, что CRUD хорошо выражается через основные HTTP методы:</p><br>
<ul>
<li><code>Create</code> — <code>POST</code></li>
<li><code>Read</code> — <code>GET</code></li>
<li><code>Update</code> — <code>PUT</code>/<code>PATCH</code></li>
<li><code>Delete</code> — <code>DELETE</code></li>
</ul><br>
<p>У CRUD тем не менее есть ряд существенных недостатков..</p><br>
<p><strong>Создание ресурса не является идемпотентным</strong>. Если наш запрос на вызов такси потерялся на пол пути, то попытка его повторить может привести к <a href="https://habr.com/ru/company/yandex/blog/442762/">приезду сразу нескольких такси</a>. Кроме того, до создания ресурса у него нет идентификатора, который необходим для адекватной работы UI, что вынуждает клиента вставлять костыли с присвоением временных идентификаторов, и последующей заменой их на постоянные после создания ресурса. Ввиду всего этого предпочтительнее формировать глобально уникальный идентификатор ещё на клиентской стороне, а на сервере создавать ресурс на лету, когда клиент пришлёт свои обновления для ещё не созданного ресурса.</p><br>
<p><strong>Удаление ресурса нарушает ссылочную целостность</strong>. И если в рамках нашей системы мы можем обновить или удалить все ссылки, то внешние системы так и продолжат ссылаться в никуда. Поэтому предпочтительнее ресурсы не удалять полностью, а лишь помечать скрытыми.</p><br>
<p>Таким образом <strong>для нашего протокола хватит лишь двух HTTP-методов</strong>:</p><br>
<ul>
<li><code>GET</code> для чтения.</li>
<li><code>PATCH</code> для обновления.</li>
</ul><br>
<p>Важно отметить, что ресурс может быть довольно большим, поэтому важны механизмы как частичного чтения (fetch plan), так и частичного обновления (<code>PATCH</code>, но не <code>PUT</code>).</p><br>
<h2 id="real-time">Real Time</h2><br>
<p>Подход HTTP с запросом/ответом плохо подходит для современных приложений, которым нужно в реальном времени реагировать на изменения, не заваливая сервер запросами вида &quot;а не изменилось ли что?&quot;. Для таких приложений необходимо поднимать двустороннее WebSocket соединение. А чтобы не повторять одну и ту же логику дважды, HTTP запросы можно делать через него:</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/573/33e/4a4/57333e4a424f3ce7bdbc42c2869760eb.png"></p><br>
<p>В дополнение к стандартным <code>GET</code> и <code>PATCH</code>, при соединении по WebSocket стоит поддержать ещё пару методов:</p><br>
<ul>
<li><code>WATCH</code> — это то же самое, что и <code>GET</code>, но дополнительно подписывает клиента на обновления ресурса.</li>
<li><code>FORGET</code> — просто отписывает от обновлений.</li>
</ul><br>
<h2 id="keys">Keys</h2><br>
<p>При выборе способа идентификации сущности можно выделить два основных подхода:</p><br>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Natural_key" rel="nofollow noopener noreferrer">Натуральный ключ</a>, формирующийся из свойств сущности. Но он не эффективен, не гарантирует уникальность и может динамически меняться, что создаёт множество проблем.</li>
<li><a href="https://ru.wikipedia.org/wiki/%D0%A1%D1%83%D1%80%D1%80%D0%BE%D0%B3%D0%B0%D1%82%D0%BD%D1%8B%D0%B9_%D0%BA%D0%BB%D1%8E%D1%87" rel="nofollow noopener noreferrer">Суррогатный ключ</a>, генерирующийся автоматически. Он эффективен, неизменен и гарантированно уникален.</li>
</ul><br>
<p>Ключевое свойство тут — неизменность. <strong>Идентификатор не должен меняться со временем</strong>, иначе его сложно назвать идентификатором. Поэтому нам подойдёт любой неизменный ключ. И зачастую натурального неизменного ключа попросту не удаётся придумать. Поэтому как правило это должен быть именно суррогатный.</p><br>
<h2 id="model">Model</h2><br>
<p>Как правило, прикладная область представляет из себя граф, где узлами выступают несколько десятков типов сущностей, а рёбрами — несколько сотен типов отношений между ними.</p><br>
<p>Часть этих сущностей и отношений представлена в базе данных в явном виде, что характерно для рёбер в графовых СУБД. Часть — в неявном, что характерно для отношений в реляционных СУБД. А часть может быть виртуальными, вычисляемыми на лету.</p><br>
<p>Кстати, на тему графовых СУБД у меня есть пара интересных статей:</p><br>
<ul>
<li><a href="https://habhub.hyoo.ru/#!author=nin-jin/repo=HabHub/article=3" rel="nofollow noopener noreferrer">Не пора ли реляционным базам данных на свалку истории?</a></li>
<li><a href="https://habhub.hyoo.ru/#!author=nin-jin/repo=HabHub/article=9" rel="nofollow noopener noreferrer">Пилим каталог товаров не притрагиваясь к реляционной алгебре</a></li>
</ul><br>
<p>Хорошей практикой является абстрагирование API от деталей хранения и внутреннего представления данных. Это позволяет менять внутренности без изменения внешнего контракта, и не усложнять его низкоуровневыми деталями.</p><br>
<p>Итак, опишем наиболее простую, но гибкую модель:</p><br>
<ul>
<li><code>Entity</code> — документ, хранящий различные данные.</li>
<li><code>Type</code> — тип сущности, который определяет какие у неё есть свойства и какого они типа.</li>
<li><code>ID</code> — суррогатный идентификатор сущности, уникальный в рамках её типа.</li>
<li><code>URI</code> — уникальный идентификатор сущности в рамках всего API, представляющий из себя ссылку относительно базового URI API.</li>
<li><strong>Сущности могут содержать URI других сущностей в качестве значений свойств, что позволяет им образовывать граф</strong>.</li>
</ul><br>
<h2 id="fetch-plan">Fetch Plan</h2><br>
<p>Часто при реализации REST API ресурс возвращается целиком. Хороший анти пример — <a href="https://api.github.com/search/issues?q=label:HabHub%20is:open&amp;sort=updated&amp;per_page=100" rel="nofollow noopener noreferrer">поиск через GitHub API</a>, выдача которого запросто может весить полтора мегабайта вместо требуемых для <a href="https://habhub.hyoo.ru/" rel="nofollow noopener noreferrer">отображения меню</a> пары килобайт. Это типичная проблема, называемая <em>overfetch</em>.</p><br>
<p>Если в некоторых ответах ресурс будет возвращаться в сокращённом виде, то в ряде случаев это приведёт к необходимости дозапрашивать полное представление ресурса ради одного недостающего поля. В примере с GitHub поиском данные пользователя выдаются в сокращённом виде. А это значит, что если нам нужно рядом с пользователем показывать ещё и список организаций, в которых он состоит, то нам придётся сделать ещё N запросов за <a href="https://api.github.com/users/nin-jin" rel="nofollow noopener noreferrer">всеми данными пользователя</a>. Это не менее типичная проблема, называемая <em>underfetch</em>.</p><br>
<p>Так же тут можно заметить, что если один и тот же пользователь встречается в нескольких местах, то одни и те же его данные дублируются многократно. В моей практике был курьёзный случай с менеджером задач, где каждая задача находилась в нескольких папках, те в нескольких других, и так далее до корня. И когда приложение при старте запрашивало дерево папок, то вместо десятка килобайт данных, оно получало ответ в десятки мегабайт. А это мало того, что нагружало сервер и сеть, так ещё и Internet Explorer просто падал при попытке распарсить столь большой JSON.</p><br>
<p>Последняя проблема является следствием <em>денормализации</em> данных, не являющихся по своей сути <a href="https://ru.wikipedia.org/wiki/%D0%94%D0%B5%D1%80%D0%B5%D0%B2%D0%BE_(%D1%82%D0%B5%D0%BE%D1%80%D0%B8%D1%8F_%D0%B3%D1%80%D0%B0%D1%84%D0%BE%D0%B2)" rel="nofollow noopener noreferrer">ориентированным деревом</a>. Особую пикантность этой ситуации придавало то, что сервер получал данные из базы в нормальной форме, но для выдачи клиенту производил денормализацию. А клиент, получая данные в денормализованной форме, делал обратную нормализацию, чтобы избавиться от дубликатов.</p><br>
<p>Отчасти поэтому GitHub со временем перешёл на более модный GraphGL, который решает первые две проблемы, но не последнюю. Мы же решим их все. А значит нам нужно следующее:</p><br>
<ul>
<li><strong>Partial Fetch</strong> — указание в запросе какие именно поля надо выгружать.</li>
<li><strong>Recursive Fetch</strong> — если в поле находится ссылка на другой ресурс, то указание в запросе, какие его свойства надо выгружать.</li>
<li><strong>Filtered Fetch</strong> — указание ограничений как для непосредственной выдачи, так и для загружаемых рекурсивно коллекций.</li>
<li><strong>Normalized Output</strong> — возвращение в ответе небольшого среза графа в нормальной форме без дублирования.</li>
</ul><br>
<h1 id="query">Query</h1><br>
<p>Итак, ближе к делу, пришла пора разработать язык запросов ко графу в рамках REST архитектуры..</p><br>
<h2 id="applications">Applications</h2><br>
<p>Прежде всего надо определиться где и как будут использоваться запросы:</p><br>
<ul>
<li>В коде приложения в виде литерала прописан URI.</li>
<li>Через специальный DSL формируется URI с подстановкой динамических данных.</li>
<li>Разработчик может просто открыть URI в браузере, чтобы посмотреть что возвращает сервер.</li>
<li>В сетевом логе клиента разработчик может найти интересующий его запрос, чтобы посмотреть подробности.</li>
<li>В сетевом логе сервера запросы тоже часто выводятся в одну строку с минимальными подробностями.</li>
<li>Выдача может быть сохранена в виде файла. Хорошо бы иметь сам запрос в качестве его имени.</li>
<li>Тот же формат может быть использован и для адресов страниц для пользователей.</li>
<li>URI может быть отправлен в чате, комментарии, социальной сети и тд.</li>
<li>URI может выводиться в XML в том числе в виде идентификатора узла.</li>
</ul><br>
<h2 id="special-symbols">Special Symbols</h2><br>
<p>Так как запрос может содержать пользовательские данные, то в них придётся экранировать все спецсимволы. В формате URL уже есть ряд стандартных спец символов, поддерживаемых любыми инструментами:</p><br>
<pre><code class="plaintext">: @ / $ + ; , ? &amp; = #</code></pre><br>
<p>Они экранируются при использовании <code>encodURIComponent</code>, но не при использовании <code>encodeURI</code>, то есть с этими символами мы точно не получим неожиданного экранирования. Однако, с некоторыми из них всё же есть проблемы:</p><br>
<ul>
<li><code>: / ?</code> — не допустимы в именах файлов.</li>
<li><code>:</code> — не допустим в начале пути URL.</li>
<li><code>/</code> — ряд инструментов показывает лишь последний сегмент пути после него, что порой не информативно.</li>
<li><code>? #</code> — ряд инструментов экранирует множественные вхождения этих символов в URL.</li>
<li><code>#</code> — всё, что после этого символа, браузер на сервер не передаёт.</li>
<li><code>&amp;</code> — требует неуклюжего экранирования в XML: <code>&amp;amp;</code>.</li>
</ul><br>
<p>Таким образом, ряд допустимых спецсимволов сокращается до:</p><br>
<pre><code class="plaintext">@ $ + ; , =</code></pre><br>
<p>Так как нам надо делать глубокие выборки, то нам нужны те или иные формы скобок. Однако, эти символы на роль скобок совершенно не подходят. Давайте проанализируем какие виды наглядных скобок вообще есть:</p><br>
<ul>
<li><code>()</code> — не экранируются в пользовательских данных стандартными инструментами (<code>encodeURIComponent</code>), так что совсем не подходят.</li>
<li><code>&lt;&gt;</code> — экранируются при отображении в Chrome Dev Tools, что резко снижает наглядность. Не допустимы в именах файлов. Требует неуклюжего экранирования в XML.</li>
<li><code>{}</code> — экранируются при использовании до <code>?</code> в Chrome, но если размещать запрос после <code>?</code>, то всё хорошо.</li>
<li><code>[]</code> — не экранируется ни в адресной строке браузеров, ни в их логах запросов. Вообще супер!</li>
</ul><br>
<p>Так что дополним допустимое множество спецсимволов квадратными скобками:</p><br>
<pre><code class="plaintext">@ $ + ; , = [ ]</code></pre><br>
<p>Отдельно стоит отметить символы, которые не экранируются в пользовательских данных:</p><br>
<pre><code class="plaintext">~ ! * ( ) _ - ' .</code></pre><br>
<p>Их допустимо использовать, но лишь в тех местах, где синтаксически не может быть пользовательских данных. Впритык к ним такие символы тоже лучше не использовать, чтобы визуально они не сливались.</p><br>
<h2 id="syntax">Syntax</h2><br>
<p>Так как запрос может быть довольно сложным, но представляет из себя одну строку, то крайне важно, чтобы синтаксис был на столько компактным, на сколько это возможно. Но не в ущерб наглядности, конечно же.</p><br>
<p>Чтобы полностью идентифицировать сущность нам надо указать её тип и идентификатор. Нет ничего естественнее, чем соединить их через <code>=</code>:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%3Djin" rel="nofollow noopener noreferrer"><code>person=jin</code></a></blockquote><p>Как можно заметить, это не полный URI, а его сокращённая форма. Если базовый URI API <code>https://example.org/</code>, то полный URI сущности получится такой:</p><br>
<blockquote><code>https://example.org/person=jin</code></blockquote><p>Теперь, если в выдаче по этой ссылке мы получим, например <code>article=123</code>, то такой URI тоже правильно отрезолвится в:</p><br>
<blockquote><code>https://example.org/article=123</code></blockquote><p>Относительные URI хороши не только тем, что они короткие, но и тем, что мы можем работать с одним и тем же графом через разные <em>API Enpoints</em>, что очень полезно, например, при переезде API.</p><br>
<p>Что если нам нужен не один пользователь, а все? Просто убираем идентификатор и получаем всю коллекцию:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person" rel="nofollow noopener noreferrer"><code>person</code></a></blockquote><p>Да, в общем случае, имя — это не тип, а имя коллекции или поля. Воспользуемся <code>;</code>, чтобы выбрать сразу несколько коллекций:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%3Barticle%3Bsection" rel="nofollow noopener noreferrer"><code>person;article;section</code></a></blockquote><p>Важно отметить, что по таком запросу возвращены будут лишь списки идентификаторов сущностей, но не их данные. Поэтому воспользуемся скобками, чтобы указать, какие именно поля мы хотим видеть в выдаче:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bage%5D%3Barticle%5Btitle%3Bcontent%5D" rel="nofollow noopener noreferrer"><code>person[name;age];article[title;content]</code></a></blockquote><p>Скобки можно использовать рекурсивно, чтобы делать глубокие выборки:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%3Djin%5Bname%3Bage%3Bfriend%5Bname%3Bage%5D%5D" rel="nofollow noopener noreferrer"><code>person=jin[name;age;friend[name;age]]</code></a></blockquote><p>Тут мы выбрали имена и возраста конкретного пользователя и всех его друзей.</p><br>
<p>Предикат после имени в общем случае является не указанием ID, а произвольным фильтром. Просто для сущностей он интерпретируется как фильтр по ID. Для примера, загрузим не всех пользователей, а только девушек:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female]</code></a></blockquote><p>Тут важно отметить, что фильтрация по какому-либо полю обычно сопряжена с загрузкой этого поля. Поэтому для каждой девушки тут будет выдано не только имя и номер телефона, но и пол. Это может показаться избыточным в данном примере. Но только до тех пор, пока мы не узнаем, что под <code>female</code> может скрываться и <code>trap</code>, и было бы не плохо по выдаче это распознать. Так что клиенту лучше не строить гипотез касательно фактических значений полей, а просто получать их от сервера.</p><br>
<p>Предикат может быть как позитивным, так и негативным. Так что оставим лишь незамужних девушек, используя <code>!=</code>:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female;status!=married]</code></a></blockquote><p>В качестве значения можно указать не только конкретное значение, но и диапазон, используя <code>@</code>. Диапазоны могут быть следующих видов:</p><br>
<ul>
<li>Закрытый с нижней границей: <code>lo@</code></li>
<li>Закрытый с верхней границей: <code>@hi</code></li>
<li>Закрытый с обеими границами: <code>lo@hi</code></li>
<li>Закрытый с совпадающими границами: <code>val@val</code> или просто <code>val</code></li>
</ul><br>
<p>Да, любое одиночное значение — это на самом деле диапазон. Уточним, что нас интересуют лишь взрослые девушки:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%3Bage%3D18%40%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female;status!=married;age=18@]</code></a></blockquote><p>А диапазон может быть не один, а несколько, разделённых <code>,</code>. Так что добавим, что помолвленные девушки нас тоже не интересуют:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%2Cengaged%3Bage%3D18%40%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female;status!=married,engaged;age=18@]</code></a></blockquote><p>Выдачу мы можем сразу отсортировать по загружаемым полям, используя префикс <code>+</code> для сортировки по возрастанию и <code>-</code> для сортировки по убыванию. Для примера, выведем в начало молодых девушек, с максимальным числом талантов:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%2Cengaged%3B-skills%3B%2Bage%3D18%40%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female;status!=married,engaged;-skills;+age=18@]</code></a></blockquote><p>Приоритет сортировки полей определяется расположением их в запросе. Кто первый встал — того и тапки.</p><br>
<p>Как и в случае с фильтрами, сортировки тоже приводят к автоматической загрузке соответствующих полей, что позволяет сохранять URI коротким.</p><br>
<p>У каждой сущности есть обобщённые поля, начинающиеся с <code>_</code>, через которые можно, например, получать агрегированную информацию, вместо детальной. Если вместо числового поля с числом талантов у нас есть лишь поле со ссылками на сущности описывающие эти таланты, но мы не хотим их все загружать, то можем просто получить их число, используя функцию <code>_len</code>:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%2Cengaged%3B-_len%5Bskill%5D%3B%2Bage%3D18%40%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female;status!=married,engaged;-_len[skill];+age=18@]</code></a></blockquote><p>В функцию агрегации передаётся не просто имя поля, а подзапрос, размер выдачи которого и будет возвращён для каждой девушки. Например, уточним, что нас интересуют лишь таланты по воспитанию детей:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%2Cengaged%3B-_len%5Bskill%5Bkind%3Dkids%5D%5D%3B%2Bage%3D18%40%5D" rel="nofollow noopener noreferrer"><code>person[name;phone;sex=female;status!=married,engaged;-_len[skill[kind=kids]];+age=18@]</code></a></blockquote><p>Другие агрегационные функции: <code>_sum</code>, <code>_min</code>, <code>_max</code>. И этот список будет расширяться. Каждая функция сама определяет сколько и каких параметров ей надо передавать.</p><br>
<p>Если же мы хотим получить не весь список, а, например, лишь первые 20, то можем воспользоваться другим обобщённым полем — <code>_num</code>, которое содержит номер сущности в конкретном списке (сам номер при этом не возвращается):</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5B_num%3D0%4020%3Bname%3Bphone%3Bsex%3Dfemale%3Bstatus!%3Dmarried%2Cengaged%3B-_len%5Bskill%5Bkind%3Dkids%5D%5D%3B%2Bage%3D18%40%5D" rel="nofollow noopener noreferrer"><code>person[_num=0@20;name;phone;sex=female;status!=married,engaged;-_len[skill[kind=kids]];+age=18@]</code></a></blockquote><p>Вот и весь язык запросов. Как видите, весьма короткий запрос позволяет довольно точно указать, что мы хотим. Если в последнем URI вы узнали себя — срочно пишите мне <a href="https://t.me/nin_jin" rel="nofollow noopener noreferrer">телеграмы</a>. А с теми кто остался мы продолжаем..</p><br>
<h2 id="back-compatibility">Back Compatibility</h2><br>
<p>Символ <code>;</code> для разделения параметров выбран из соображений удобочитаемости и универсальности. Однако, не сложно заметить, что если парсер будет поддерживать также и <code>&amp;</code>, то его можно будет использовать и для для обычных <a href="https://en.wikipedia.org/wiki/Query_string" rel="nofollow noopener noreferrer">QueryString</a>. Это позволяет, плавно мигрировать с QueryString на HARP:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=search%3Dharp%26offset%3D0%26limit%3D10" rel="nofollow noopener noreferrer"><code>search=harp&amp;offset=0&amp;limit=10</code></a></blockquote><p>Но и это ещё не всё, добавив <code>/</code> с той же семантикой, мы сможем разбирать и pathname:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=users%2Fjin%2Fcomments%3D123" rel="nofollow noopener noreferrer"><code>users/jin/comments=123</code></a></blockquote><p>А добавив ещё и <code>?</code> с <code>#</code>, можем всё это комбинировать:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=users%2Fjin%2Fcomments%3Fsince%3D2022-08-04%23scrollTop%3D9000" rel="nofollow noopener noreferrer"><code>users/jin/comments?since=2022-08-04#scrollTop=9000</code></a></blockquote><br>
<h2 id="typescript-api">TypeScript API</h2><br>
<p>Строковое представление запросов удобно, когда работаешь с ними вручную. Но когда надо формировать их программно, подставляя динамические значения, работать со строками уже не так классно. Поэтому я реализовал пару функций:</p><br>
<ul>
<li><a href="https://github.com/hyoo-ru/harp.hyoo.ru/blob/master/from/string/string.ts" rel="nofollow noopener noreferrer">$hyoo_harp_from_string</a> — Парсит HARP Query в JSON</li>
<li><a href="https://github.com/hyoo-ru/harp.hyoo.ru/blob/master/to/string/string.ts" rel="nofollow noopener noreferrer">$hyoo_harp_to_string</a> — Собирает HARP Query из JSON</li>
</ul><br>
<p>Используются они так:</p><br>
<pre><code class="javascript">const harp = $hyoo_harp_from_string( 'person[+age=18@;+name;article[title];_num=20@29]' )
// {
//     person: {
//         age: {
//             '+': true,
//             '=': [[ '18', '' ]],
//         },
//         name: {
//             '+': true,
//         },
//         article: {
//             title: {},
//         },
//         _num: {
//             '=': [[ '20', '29' ]],
//         },
//     },
// }</code></pre><br>
<pre><code class="javascript">const ADULT = [ 18, '' ]
const page = 2
const nums = [ page * 10, ( page + 1 ) * 10 - 1 ]

const uri = $hyoo_harp_to_string({
    person: {
        age: {
            '+': true,
            '=': [ ADULT ],
        },
        name: {
            '+': true,
        },
        article: {
            title: {},
        },
        _num: {
            '=': [ nums ],
        },
    },
})
// person[+age=18@;+name;article[title];_num=20@29]</code></pre><br>
<p>Эти функции слабо типизированы. В том смысле, что ничего не знают про структуру графа. Но мы можем объявить схему, используя, например, <a href="https://github.com/hyoo-ru/harp.hyoo.ru/tree/master/scheme" rel="nofollow noopener noreferrer">$hyoo_harp_scheme</a>, основанном на <a href="https://github.com/hyoo-ru/mam_mol/tree/master/data" rel="nofollow noopener noreferrer">$mol_data</a>:</p><br>
<pre><code class="javascript">const Str = $mol_data_optional( $hyoo_harp_scheme( {}, String ) )
const Int = $mol_data_optional( $hyoo_harp_scheme( {}, Number ) )

const Article = $hyoo_harp_scheme({
    title: Str,
    content: Int,
})

const Person = $hyoo_harp_scheme({
    name: Str,
    age: Int,
    article: $mol_data_optional( Article ),
})</code></pre><br>
<p>Теперь мы можем собирать URI и тайп чекер будет гарантировать, что мы нигде не ошибёмся в именах, и даже будет подсказывать нам при вводе:</p><br>
<pre><code class="javascript">// person[name;age;article[title]]
const query = Person.build({
    person: {
        name: {},
        age: {},
        article: {
            title: {},
        },
    },
})</code></pre><br>
<p>И наоборот, полученный от клиента URI мы легко можем распарсить, получив строго типизированный JSON:</p><br>
<pre><code class="javascript">const query = Person.parse( 'person[+age=18@;+name;article[title];_num=20@29]' )

const article_fetch1 = Object.keys( query.person.article ) // ❌ article may be absent
const article_fetch2 = Object.keys( query.person.article ?? {} ) // ✅
const follower_fetch = Object.keys( query.follower ?? {} ) // ❌ Person don't have follower</code></pre><br>
<p>Наконец, даже если у нас уже есть какое-то JSON представление запроса, то мы можем его статикодинамически провалидировать:</p><br>
<pre><code class="javascript">const person1 = Person({}) // ✅
const person2 = Person({ name: {} }) // ✅
const person3 = Person({ title: {} }) // ❌ compile-time error: Person don't have title
const person4 = Person({ _num: [[ Math.PI ]] }) // ❌ run-time error: isn't integer
const person5: typeof Person.Value = person2 // ✅ same type</code></pre><br>
<p>Осталось научиться генерировать TS схему из её декларативного описания, чтобы не приходилось её заново описывать для каждого языка отдельно.</p><br>
<h1 id="response">Response</h1><br>
<p>Так как модель прикладной области представляет из себя граф, а в ответе нужно возвращать её подграф, то нам нужна возможность представления графа в виде дерева без дублирования. Для этого разделим представление графа на 4 уровня:</p><br>
<ul>
<li><code>Type</code> — Определяет типы хранящихся в них сущностей. Это важно для языков со статической типизацией, чтобы использовались соответствующие структуры данных для обработки ответа.</li>
<li><code>ID</code> — Идентифицируют сущность в рамках типа.</li>
<li><code>Field</code> — Имя поля сущности.</li>
<li><code>Value</code> — Значение поля, тип которого определяется схемой и именем поля.</li>
</ul><br>
<p>В качестве значений могут быть URI других сущностей. Именно URI, а не ID, так как в общем случае в одном списке могут идти разные типы сущностей вперемешку.</p><br>
<p>Также, помимо собственно данных ответа, стоит возвращать и сам запрос (<code>_query</code>) в том виде, как его понял сервер, чтобы разработчик клиента мог понимать всё ли он делает правильно и кому чинить проблему, когда возвращается что-то не то.</p><br>
<p>Наконец, при получении любого поля любой сущности, может произойти исключительная ситуация. Возвращать ошибку для всей сущности и уж тем более для всего запроса при этом было бы не практично. Поэтому использовать HTTP коды для выражения ошибок формирования ответа не стоит. А нужно быть готовым, что на любом уровне вместо собственно данных, может прийти описание ошибки (<code>_error</code>).</p><br>
<h2 id="format">Format</h2><br>
<p>Разным клиентам может быть удобно работать с разными форматами представления данных, поэтому используя <a href="https://en.wikipedia.org/wiki/Content_negotiation" rel="nofollow noopener noreferrer">Content Negotiation</a> позволим ему выбирать один из следующих:</p><br>
<ul>
<li><a href="https://www.w3.org/XML/" rel="nofollow noopener noreferrer">JSON</a>: <code>Accept: application/json</code> (самый популярный)</li>
<li><a href="https://github.com/nin-jin/tree.d" rel="nofollow noopener noreferrer">Tree</a>: <code>Accept: application/x-harp.tree</code> (наиболее наглядный)</li>
<li><a href="https://www.json.org/json-en.html" rel="nofollow noopener noreferrer">XML</a>: <code>Accept: application/xml</code> (по умолчанию)</li>
</ul><br>
<p>Разберём их по подробнее на примере следующего запроса:</p><br>
<blockquote><a href="https://harp.hyoo.ru/#!query=person%5Bname%3Bage%3Barticle%5Btitle%3Bauthor%5Bname%3B_len%5Bfollower%5Bvip%3Dtrue%5D%5D%5D%5D%5D%3Bme" rel="nofollow noopener noreferrer"><code>person[name;age;article[title;author[name;_len[follower[vip=true]]]]];me</code></a></blockquote><br>
<h3 id="json">JSON</h3><br>
<p>Начнём с самого популярного сейчас формата, для лучшего понимания:</p><br>
<pre><code class="json">{
    &quot;_query&quot;: {
        &quot;person[name;age;article[title;author[name;_len[follower[vip=true]]]]]&quot;: {
            &quot;reply&quot;: [
                &quot;person=jin&quot;,
            ],
        },
        &quot;me&quot;: {
            &quot;reply&quot;: [
                &quot;person=jin&quot;,
            ],
        },
    },
    &quot;person&quot;: {
        &quot;jin&quot;: {
            &quot;name&quot;: &quot;Jin&quot;,
            &quot;age&quot;: { &quot;_error&quot;: &quot;Access Denied&quot; },
            &quot;article&quot;: [
                &quot;article=123&quot;,
                &quot;article=456&quot;,
            ],
            &quot;_len&quot;: {
                &quot;follower[vip=true]&quot;: 100500,
            },
        }
    },
    &quot;article&quot;: {
        &quot;123&quot;: {
            &quot;title&quot;: &quot;HARP&quot;,
            &quot;author&quot;: [
                &quot;person=jin&quot;,
            ],
        },
        &quot;456&quot;: { &quot;_error&quot;: &quot;Corrupted Database&quot; },
    },
}</code></pre><br>
<p>У JSON, однако, есть <a href="https://github.com/nin-jin/slides/tree/master/tree" rel="nofollow noopener noreferrer">множество недостатков</a>, таких как:</p><br>
<ul>
<li>Многострочный текст вытягивается в одну строку.</li>
<li>Много визуального шума.</li>
<li>Либо много весит, либо вытягивается в одну строку.</li>
</ul><br>
<p>Поэтому я бы рекомендовал использовать следующий формат, когда это возможно..</p><br>
<h3 id="tree">Tree</h3><br>
<pre><code class="plaintext">_query
    \person[name;age;article[title;author[name;_len[follower[vip=true]]]]]
        reply \person=jin
    \me
        reply \person=jin
person
    \jin
        name \Jin
        age _error \Access Denied
        article
            \article=123
            \article=456
        _len
            \follower[vip=true]
                100500
article
    \123
        title \HARP
        author \person=jin
    \456
        _error \Corrupted Database</code></pre><br>
<p>Как видите, в этой форме выдача более компактная и менее зашумлённая. Однако, по умолчанию всё же предпочтительнее использовать следующий формат, из-за одной его уникальной возможности..</p><br>
<h3 id="xml">XML</h3><br>
<pre><code class="xml">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;_harp.xsl&quot;?&gt;
&lt;harp&gt;
    &lt;_query id=&quot;person[name;age;article[title;author[name;_len[follower[vip=true]]]]]&quot;&gt;
        &lt;reply&gt;person=jin&lt;/reply&gt;
    &lt;/_query&gt;
    &lt;_query id=&quot;me&quot;&gt;
        &lt;reply&gt;person=jin&lt;/reply&gt;
    &lt;/_query&gt;
    &lt;person id=&quot;person=jin&quot;&gt;
        &lt;name&gt;Jin&lt;/name&gt;
        &lt;age _error=&quot;Access Denied&quot; /&gt;
        &lt;article&gt;article=123&lt;/article&gt;
        &lt;article&gt;article=456&lt;/article&gt;
        &lt;_len id=&quot;person=jin/follower[vip=true]&quot;&gt;100500&lt;/_len&gt;
    &lt;/person&gt;
    &lt;article id=&quot;article=123&quot;&gt;
        &lt;title&gt;HARP&lt;/title&gt;
        &lt;author&gt;person=jin&lt;/author&gt;
    &lt;/article&gt;
    &lt;article id=&quot;article=456&quot; _error=&quot;Corrupted Database&quot; /&gt;
&lt;/harp&gt;</code></pre><br>
<p>Обратите внимание на подключение XSL шаблона в самом начале. Он нужен для того, чтобы при открытии URI в браузере показывался не голый дамп XML или JSON, а красивая HTML страница с иконками, кнопками и рабочими гиперссылками. Это делает URI полностью самодостаточным: вам не нужно искать где-то актуальную документацию — она доступна ровно там же, где и сами данные, по которым можно легко ходить туда-сюда (<a href="https://ru.wikipedia.org/wiki/HATEOAS" rel="nofollow noopener noreferrer">HATEOAS</a> на максималках).</p><br>
<p><a href="https://nin-jin.github.io/harp" rel="nofollow noopener noreferrer">Тут</a> я сделал небольшой пример, но можно гораздо, гораздо лучше! Как минимум, что хотелось бы видеть:</p><br>
<ul>
<li>Быстрое переключение между вариантами представления (UI, Tree, JSON, XML).</li>
<li>Все URI являются гиперссылками.</li>
<li>Полнотекстовый поиск по выдаче.</li>
<li>Древовидное представление со сворачиванием и разворачиванием.</li>
<li>Табличное представление сущностей одного типа.</li>
<li>Кнопки для быстрого изменения запроса (например, добавить поле в запрос одним кликом).</li>
<li>Описания сущностей и полей, взятые из схемы.</li>
</ul><br>
<h1 id="create--update">Create &amp; Update</h1><br>
<p>Обновлять ресурсы проще простого: откуда и что мы получили, то и туда отправляем. При этом отправлять имеет смысл лишь те поля, что хочется изменить, а не все подряд. Все отправляемые обновления сущностей применяются в рамках одной транзакции, так что запрос либо проходит, либо нет. В URI же указывается, что запрос должен вернуть.</p><br>
<p>Например, перешлём немного донатов автору данного опуса, и получим актуальные данные сразу по обоим пользователям:</p><br>
<pre><code class="plaintext">PATCH /person=jin,john[ballance;transfer]

transfer
    \12345
        from \john
        to \jin
        amount 9000</code></pre><br>
<p>И в случае успеха будет такой ответ:</p><br>
<pre><code class="plaintext">person
    \jin
        ballance 100500
        transfer
            \transfer=34567
            \transfer=12345
    \john
        ballance -100500
        transfer
            \transfer=23456
            \transfer=12345</code></pre><br>
<p>Или создадим одной транзакцией сообщение с голосовалкой:</p><br>
<pre><code class="plaintext">PATCH /

message
    \12345
        chat \123
        body \Do you like HARP?
        attachment \poll=67890
poll
    \67890
        option
            \Yes
            \No
            \There is no third way</code></pre><br>
<p>А в ответе будет пусто, так как мы тут ничего не запросили.</p><br>
<h1 id="comparison">Comparison</h1><br>
<p>Что ж, давайте теперь сравним наш гуманный протокол с ближайшими альтернативами..</p><br>
<h2 id="architecture-1">Architecture</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Architecture</strong></td>
<td>✅REST</td>
<td>✅REST</td>
<td>❌RPC</td>
</tr>
</tbody>
</table></div><br>
<p>REST архитектура предпочтительнее. Не даром именно под неё когда-то и разрабатывался HTTP.</p><br>
<h2 id="common-query-string">Common Query String</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Common <strong>uri query string</strong> compatibile</td>
<td>⭕Back</td>
<td>✅Full</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>HARP обратно совместим с традиционным представлением HTTP запросов. OData же совместима полностью, но какой ценой..</p><br>
<p>Вы только сравните OData запрос:</p><br>
<pre><code class="plaintext">GET /pullRequest?$filter=state%20eq%20closed%20or%20state%20eq%20merged&amp;$orderby=repository%20asc%2CupdateTime%20desc&amp;$select=state%2Crepository%2Fname%2Crepository%2Fprivate%2Crepository%2Fowner%2Fname%2CupdateTime
%2Cauthor%2Fname&amp;$skip=20&amp;$top=10&amp;$format=json</code></pre><br>
<p>И эквивалентный HARP запрос:</p><br>
<pre><code class="plaintext">GET /pullRequest[state=closed,merged;+repository[name;private;owner[name]];-updateTime;author[name];_num=20@30]</code></pre><br>
<p>GraphQL же вообще не совместим, если, конечно, не считать совместимостью засовывание всего запроса в один get-параметр.</p><br>
<h2 id="single-line">Single Line</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Single line</strong> query</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>GraphQL, конечно, тоже можно в одну строку упаковать, но читать его тогда крайне сложно:</p><br>
<pre><code class="plaintext">GET /graphq?query=%7B%20request%20%7B%20pullRequests(%20state%3A%20%5B%20closed%2C%20merged%20%5D%2C%20order%3A%20%7B%20repository%3A%20asc%2C%20updateTime%3A%20desc%20%7D%2C%20offset%3A%2020%2C%20limit%3A%2010%20)%20%7B%20id%20state%20updateTime%20repository%20%7B%20name%20private%20owner%20%7B%20id%20name%20%7D%20%7D%20updateTime%20author%20%7B%20id%20name%20%7D%20%7D%20%7D%20%7D</code></pre><br>
<p>Всё же он ориентирован именно на двухмерное представление и никак иначе:</p><br>
<pre><code class="plaintext">POST /graphql

{
    request {
        pullRequests(
            state: [ closed, merged ],
            order: { repository: asc, updateTime: desc },
            offset: 20,
            limit: 10,
        ) {
            id
            state
            updateTime
            repository {
                name
                private
                owner {
                    id
                    name
                }
            }
            updateTime
            author {
                id
                name
            }
        }
    }
}</code></pre><br>
<h2 id="pseudo-static-1">Pseudo Static</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pseudo-static</strong> compatibile</td>
<td>⭕Back</td>
<td>⭕Partial</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>HARP обратно совместим. В OData пути используются для идентификации ресурсов:</p><br>
<pre><code class="plaintext">/service/Categories(ID=1)/Products(ID=1)</code></pre><br>
<p>GraphQL же тут совсем не при делах.</p><br>
<h2 id="request-vs-response">Request vs Response</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Same model</strong> of request and response</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>В REST протоколах достаточно разобраться в модели предметной области и ты уже имеешь всю полноту возможностей. В случае же RPC, помимо модели ответа, необходимо так же знать и кучу сигнатур процедур, и постоянно выпрашивать новые у бэкендеров. А в случае GraphQL нужно ещё знать и поддерживать отдельную модель запросов.</p><br>
<h2 id="file-names">File Names</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>File name</strong> compatible</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>Не то чтобы возможность вставлять запросы в имена файлов была всем необходима, но в ряде случаев она здорово упрощает жизнь, а достаётся совсем бесплатно.</p><br>
<pre><code class="bash">cp ./report[day=2022-02-22].json ./archive/year=2022</code></pre><br>
<h2 id="web-tools">Web Tools</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Web Tools</strong> Friendly</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>Возможность не ломать глаза об экранирование в разных местах использования URI экономит не очень много времени и нервов, но делает это часто.</p><br>
<h2 id="collection-manipulations">Collection Manipulations</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data <strong>filtering</strong></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>Data <strong>sorting</strong></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>Data <strong>slicing</strong></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td>Data <strong>aggregation</strong></td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>Не то, чтобы в GraphQL это не выразимо. Как-то же его используют. Важно понимать, что на уровне протокола эти возможности никак не специфицированы и каждый разработчик реализует их по своему. Это осложняет создание обобщённых программных решений, умеющих работать с коллекциями. Однако, этот вопрос может быть решён протоколами более высокого уровня над GraphQL.</p><br>
<h2 id="limitations">Limitations</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td>Limited filtering <strong>logic</strong></td>
<td>✅</td>
<td>❌</td>
<td>✅</td>
</tr>
</tbody>
</table></div><br>
<p>Когда гибкости не хватает, мы не можем нормально выразить наши потребности. Когда гибкости наоборот в избытке, то серверу сложно проанализировать сложность запроса. Поэтому тут важен баланс: запросы должны быть достаточно простыми для программного анализа, но достаточно выразительными для покрытия 99% потребностей. В OData же реализовали целый язык программирования со своим уникальным синтаксисом:</p><br>
<pre><code class="plaintext">contains(User/Name, '(aTeam)') and (User/Articles add User/Comments) ge 10</code></pre><br>
<p>Круто, конечно, но поди разберись: этот запрос можно СУБД отдавать, или он положит её на лопатки, а чинить потом мне в 2 часа ночи?</p><br>
<h2 id="metadata">Metadata</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Metadata</strong> query</td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
</tr>
</tbody>
</table></div><br>
<p>Классно, когда мы можем программно исследовать реальный работающий API, а не вручную ковыряться в устаревшей документации. Это позволяет писать обобщённый код для работы с любыми API, реализующими протокол. Для каждой сущности мы можем запрашивать у API много всего интересного:</p><br>
<ul>
<li>Связанные сущности.</li>
<li>Схема данных.</li>
<li>Права на действия.</li>
<li>Документацию.</li>
</ul><br>
<p>В HARP у нас этот вопрос пока почти не проработан. Разве что в <a href="https://nin-jin.github.io/harp" rel="nofollow noopener noreferrer">том примере</a> я набросал, как это могло бы выглядеть. Остальные протоколы предоставляют лишь часть из перечисленной мета информации. Пока что этот вопрос больше всего проработан в OData.</p><br>
<h2 id="idempotency">Idempotency</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Idempotent</strong> requests</td>
<td>✅</td>
<td>⭕</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>HARP возводит идею идемпотентности в абсолют. OData придерживается более традиционного подхода с CRUD. Ну а GraphQL вообще не про идемпотентность. Куда-то не туда индустрия повернула. Опять.</p><br>
<h2 id="normal-form">Normal Form</h2><br>
<div class="scrollable-table"><table>
<thead>
<tr>
<th></th>
<th>HARP</th>
<th>OData</th>
<th>GraphQL</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Normalized</strong> response</td>
<td>✅</td>
<td>❌</td>
<td>❌</td>
</tr>
</tbody>
</table></div><br>
<p>Денормализованная выдача может экспоненциально размножить ваши данные. Это проще один раз увидеть, чем 100 раз услышать. Поэтому возьмём не сложный GraphQL запрос за друзьями друзей:</p><br>
<pre><code class="plaintext">{
    person('jin') {
        id
        name
        friends {
            id
            name
            friends {
                id
                name
            }
        }
    }
}</code></pre><br>
<p>И получаем такую портянку:</p><br>
<pre><code class="json">{
    &quot;person&quot;: {
        &quot;id&quot;: &quot;jin&quot;,
        &quot;name&quot;: &quot;Jin&quot;,
        &quot;friends&quot;: [
            {
                &quot;id&quot;: &quot;alice&quot;,
                &quot;name&quot;: &quot;Alice&quot;,
                &quot;friends&quot;: [
                    {
                        &quot;id&quot;: &quot;bob&quot;,
                        &quot;name&quot;: &quot;Bob&quot;,
                    },
                    {
                        &quot;id&quot;: &quot;jin&quot;,
                        &quot;name&quot;: &quot;Jin&quot;,
                    },
                ],
            },
            {
                &quot;id&quot;: &quot;bob&quot;,
                &quot;name&quot;: &quot;Bob&quot;,
                &quot;friends&quot;: [
                    {
                        &quot;id&quot;: &quot;alice&quot;,
                        &quot;name&quot;: &quot;Alice&quot;,
                    },
                    {
                        &quot;id&quot;: &quot;jin&quot;,
                        &quot;name&quot;: &quot;Jin&quot;,
                    },
                ],
            },
        ],
    }
}</code></pre><br>
<p>И это всего лишь на трёх собутыльниках. Что будет твориться со школьным классом на 20 человек, я вам не покажу, чтобы не перегружать магистральные каналы связи.</p><br>
<p>Не смотря на своё название, модель данных GraphQL на самом деле не граф, а… динамическое дерево. Со всеми отсюда вытекающими последствиями. </p><br>
<p>Крупная корпорация распиарила свою кривую поделку, а все схавали. И, причмокивая, начали пилить костыли, рассказывая остальным, <a href="https://gajus.medium.com/reducing-graphql-response-size-by-a-lot-ff5ba9dcb60" rel="nofollow noopener noreferrer">как правильно её готовить</a>:</p><br>
<ul>
<li>На сервере получили из базы данные в нормальной форме.</li>
<li>Денормализовали их для GQL выдачи.</li>
<li>Натравили дедубликатор, получив свой, не GQL формат.</li>
<li>Отослали клиенту.</li>
<li>На клиенте натравили редубликатор для получения GQL ответа.</li>
<li>Обработали таки GQL ответ.</li>
<li>А клиенту эта денормализация как кость в горле — он нормализует всё обратно.</li>
</ul><br>
<p>Куда-то не туда индустрия повернула. Снова.</p><br>
<p>А вот что мы получим через HARP:</p><br>
<pre><code class="plaintext">_query
    \person=jin[name;friend[name;friend[name]]]
        reply \person=jin
person
    \jin
        name \Jin
        friend
            \person=alice
            \person=bob
    \alice
        name \Alice
        friend
            \person=bob
            \person=jin
    \bob
        name \Bob
        friend
            \person=alice
            \person=jin</code></pre><br>
<p>Да, когда вам будут присылать дампы ответов, вам больше не придётся переспрашивать: а запрос-то какой был? Вот он, тут же в ответе.</p><br>
<h1 id="post-scriptum">Post Scriptum</h1><br>
<p>Как видите, это всё не тянет пока что ни на спецификацию, ни даже на какое-то законченное решение. У меня нет цели убедить вас следовать принятым мной решениям и срочно бросаться инкрементить версию вашего API.</p><br>
<p>По роду деятельности я использовал множество разнообразных API, и каждый раз их использование вгоняло меня в уныние из-за детских болезней, разложенных тут и там граблей, и просто бездумного копирования друг у друга кривых решений. Поэтому для меня было важно поделиться с вами своей болью и идеями, которые, я уверен, пригодятся вам, для проектирования своих собственных API. А если это будет что-то похожее на HARP — я буду только счастлив.</p><br>
<p>Если вас заинтересовали идеи HARP и вы видите в нём пользу для себя и для других, то приглашаю вас присоединиться к его обсуждению и доведению до уровня индустриального стандарта. Один я не справлюсь, но вместе мы можем сделать мир чуточку лучше. Хотя, признаться честно, я ставлю больше на третий тип архитектуры — бесконфликтная синхронизация сделанных локально изменений. Но это уже совсем другая история, о которой вы скоро определённо услышите. А пока..</p><br>
<ul>
<li>Обсудить со мной этот и другие языки можно в чате <a href="https://t.me/lang_idioms" rel="nofollow noopener noreferrer">lang_idioms</a>.</li>
<li>Обсудить TS API лучше в чате <a href="https://t.me/mam_mol" rel="nofollow noopener noreferrer">mam_mol</a>.</li>
<li>Свои размышления на разные темы компьютерных наук я выкладываю на <a href="https://www.youtube.com/channel/UC-qEImMrqSLZ9KLee1JTcuw" rel="nofollow noopener noreferrer">Core Dump</a>.</li>
<li>Почти все мои статьи доступны на <a href="https://habhub.hyoo.ru/" rel="nofollow noopener noreferrer">$hyoo_habhub</a>.</li>
<li>Приватные записи почти всех моих перфомансов слиты в <a href="https://www.youtube.com/playlist?list=PLXyFFhv8ucKSC96WOd7Ju2HmEWTA3jPa5" rel="nofollow noopener noreferrer">этот плейлист</a>.</li>
<li>Ну а остальную дичь о разработке я пишу в <a href="https://twitter.com/_jin_nin_" rel="nofollow noopener noreferrer">Twitter</a>.</li>
<li>Поблагодарить же меня за исследования и мотивировать на новые свершения можно на <a href="https://boosty.to/hyoo" rel="nofollow noopener noreferrer">Boosty</a>.</li>
</ul><br>
<p>Спасибо за внимание. Держите сердце горячим, а задницу холодной!</p><br>
<p><img src="https://habrastorage.org/getpro/habr/post_images/09e/7e3/a72/09e7e3a72515464c7dc2bdd8de4edd18.png"></p></div>
      
    </div>

        <p class="for_users_only_msg">Только зарегистрированные пользователи могут участвовать в опросе. <a href="https://habr.com/ru/auth/login/">Войдите</a>, пожалуйста.</p>

      <div class="default-block default-block_bordered default_block_polling">
    <div class="default-block__polling-header">
      <h2 class="default-block__polling-title">Do you like HARP?</h2>
    </div>

    <div class="default-block__content default-block__content_polling">
      <ul class="poll-result">
            <li class="poll-result__item">
              <div class="poll-result__data">
                <strong class="poll-result__data-percent ">32,6%</strong><span class="poll-result__data-label ">Yes</span><span class="poll-result__data-votes">16<span>
              </div>
              <div class="poll-result__bar">
                <div style="width: 32.65%" class="poll-result__progress "></div>
              </div>
            </li>
            <li class="poll-result__item">
              <div class="poll-result__data">
                <strong class="poll-result__data-percent  poll-result__data-percent_winner">59,2%</strong><span class="poll-result__data-label ">No</span><span class="poll-result__data-votes">29<span>
              </div>
              <div class="poll-result__bar">
                <div style="width: 59.18%" class="poll-result__progress  poll-result__progress_winner"></div>
              </div>
            </li>
            <li class="poll-result__item">
              <div class="poll-result__data">
                <strong class="poll-result__data-percent ">8,2%</strong><span class="poll-result__data-label ">There is no third way</span><span class="poll-result__data-votes">4<span>
              </div>
              <div class="poll-result__bar">
                <div style="width: 8.16%" class="poll-result__progress "></div>
              </div>
            </li>
      </ul>
    </div>
    <div class="default-block__footer default-block__footer_polling">Проголосовали 49 пользователей. Воздержались 16 пользователей.</div>
  </div>



    <dl class="post__tags">
      <dt class="post__tags-label">Теги:</dt>
      <dd class="post__tags-list">    <ul class="inline-list inline-list_fav-tags js-post-tags">
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BHARP%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">HARP</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BREST%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">REST</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BOData%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">OData</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BGraphQL%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">GraphQL</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BAPI%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">API</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BCRUD%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">CRUD</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BIdempotency%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Idempotency</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BNormal%20Form%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Normal Form</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BQuery%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Query</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BGraph%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Graph</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BTree%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Tree</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BJSON%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">JSON</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BXML%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">XML</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/ru/search/?q=%5BURI%5D&target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">URI</a></li>
    </ul>
    <button type="button" class="btn btn_outline_grey btn_mini hidden js-fav-edit-link" data-type="2" data-id="680376" onclick="show_edit_tags(this)">Добавить метки</button>
</dd>
    </dl>
      <dl class="post__tags">
        <dt class="post__tags-label">Хабы:</dt>
        <dd class="post__tags-list">
          <ul class="inline-list inline-list_fav-tags js-post-hubs">
              <li class="inline-list__item inline-list__item_tag">
                <a href="https://habr.com/ru/hub/webdev/" rel="tag" class="inline-list__item-link post__tag">
                  Разработка веб-сайтов
                </a>
              </li>
              <li class="inline-list__item inline-list__item_tag">
                <a href="https://habr.com/ru/hub/analysis_design/" rel="tag" class="inline-list__item-link post__tag">
                  Анализ и проектирование систем
                </a>
              </li>
              <li class="inline-list__item inline-list__item_tag">
                <a href="https://habr.com/ru/hub/xml/" rel="tag" class="inline-list__item-link post__tag">
                  XML
                </a>
              </li>
              <li class="inline-list__item inline-list__item_tag">
                <a href="https://habr.com/ru/hub/api/" rel="tag" class="inline-list__item-link post__tag">
                  API
                </a>
              </li>
              <li class="inline-list__item inline-list__item_tag">
                <a href="https://habr.com/ru/hub/typescript/" rel="tag" class="inline-list__item-link post__tag">
                  TypeScript
                </a>
              </li>
          </ul>
        </dd>
      </dl>
  </div>
    <div class="overlay hidden" id="js-user-vote-reason">
  <div class="popup popup_reasons">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title">Укажите причину минуса, чтобы автор поработал над ошибками</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_user-vote-reason">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#close" />
        </svg>
      </button>
    </div>
    <div class="popup__body">
       <span class="checkbox checkbox_custom reasons-vote__item js-user-vote-popup_list-item">
          <input type="checkbox" id="reasonList" name="reasonList" class="checkbox__input js-user-vote_checkbox" value="">
          <label for="reasonList" class="checkbox__label checkbox__label_another js-user-vote_title"></label>
        </span>
      <div id="js-user-vote-popup_list"></div>
      <button type="button" class="btn btn_blue btn_huge js-user-vote_send" disabled>Отправить анонимно</button>
    </div>
  </div>
</div>

    <div class="overlay hidden" id="js-vote-reason">
  <div class="popup popup_reasons">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title">Укажите причину минуса, чтобы автор поработал над ошибками</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_vote-reason">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#close" />
        </svg>
      </button>
    </div>
    <div class="popup__body">
       <span class="radio radio_custom reasons-vote__item js-vote-popup_list-item">
          <input type="radio" id="reasonList" name="reasonList" class="radio__input js-vote_radio" value="">
          <label for="reasonList" class="radio__label radio__label_another js-vote_title"></label>
        </span>
      <div id="js-vote-popup_list"></div>
      <button type="button" class="btn btn_blue btn_huge js-vote_send" disabled>Отправить анонимно</button>
    </div>
  </div>
</div>

</article>


      <form action="/json/favorites/" method="post" class="form form_bordered form_favorites-tags hidden" id="edit_tags_form">
  <input type="hidden" name="action" value="add" />
  <input type="hidden" name="ti" value="0" />
  <input type="hidden" name="tt" value="0" />

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)" title="Закрыть"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"/></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Пометьте публикацию своими метками</legend>
    <input type="text" name="tags_string" class="form__text-field" />
    <span class="form__desc">Метки лучше разделять запятой. Например: <i>программирование, алгоритмы</i></span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled>Сохранить</button>
  </div>
</form>

    </div>

    <div class="sidebar">
      <div class="sidebar_right_ad">
        
      </div>
      <div class="sidebar_right sidebar_content-area">
            

  <div class="default-block default-block_sidebar" id="most-reading">
    <div class="default-block__header">
      <h3 class="default-block__header-title">Читают сейчас</h3>
    </div>

      <div class="default-block__content default-block__content_most-read" id="broadcast_most-read">
            <ul class="content-list content-list_most-read">
              <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/news/t/722390/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'post'); }">OpenAI выпустила GPT-4</a>
                <div class="post-info__meta">
                  <span class="post-info__meta-item" title="Количество просмотров">
                    <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter post-info__meta-counter_small">32,9k</span>
                  </span>
                    <a onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'comment'); }" href="https://habr.com/ru/news/t/722390/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg>
                      <span class="post-info__meta-counter post-info__meta-counter_small">
                        117
                        
                      </span>
                    </a>
                </div>
              </li>
              <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/news/t/722564/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'post'); }">Соцсеть «Россграм» начала поиск инвесторов — им обещают доходность 950% за три года</a>
                <div class="post-info__meta">
                  <span class="post-info__meta-item" title="Количество просмотров">
                    <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter post-info__meta-counter_small">2,6k</span>
                  </span>
                    <a onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'comment'); }" href="https://habr.com/ru/news/t/722564/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg>
                      <span class="post-info__meta-counter post-info__meta-counter_small">
                        13
                        
                      </span>
                    </a>
                </div>
              </li>
              <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/722330/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'post'); }">Почему мужикам нужно качать орех?</a>
                <div class="post-info__meta">
                  <span class="post-info__meta-item" title="Количество просмотров">
                    <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter post-info__meta-counter_small">24,3k</span>
                  </span>
                    <a onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'comment'); }" href="https://habr.com/ru/post/722330/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg>
                      <span class="post-info__meta-counter post-info__meta-counter_small">
                        119
                        
                      </span>
                    </a>
                </div>
              </li>
              <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/news/t/722544/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'post'); }">MSI готовит серию материнских плат с разъёмами на задней панели</a>
                <div class="post-info__meta">
                  <span class="post-info__meta-item" title="Количество просмотров">
                    <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter post-info__meta-counter_small">3,6k</span>
                  </span>
                    <a onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'comment'); }" href="https://habr.com/ru/news/t/722544/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg>
                      <span class="post-info__meta-counter post-info__meta-counter_small">
                        25
                        
                      </span>
                    </a>
                </div>
              </li>
              <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/722586/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'post'); }">Лучшие языки программирования для изучения в 2023 году | Голосование</a>
                <div class="post-info__meta">
                  <span class="post-info__meta-item" title="Количество просмотров">
                    <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter post-info__meta-counter_small">1,3k</span>
                  </span>
                    <a onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'comment'); }" href="https://habr.com/ru/post/722586/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg>
                      <span class="post-info__meta-counter post-info__meta-counter_small">
                        4
                        
                      </span>
                    </a>
                </div>
              </li>
              <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/news/t/722590/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'post'); }">Panoramic Vision от BMW превращает лобовое стекло электромобиля в полноэкранный дисплей</a>
                <div class="post-info__meta">
                  <span class="post-info__meta-item" title="Количество просмотров">
                    <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter post-info__meta-counter_small">1k</span>
                  </span>
                    <a onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'read_now,post', 'comment'); }" href="https://habr.com/ru/news/t/722590/#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg>
                      <span class="post-info__meta-counter post-info__meta-counter_small">
                        5
                        
                      </span>
                    </a>
                </div>
              </li>
          </ul>
    </div>
  </div>


            <div class="default-block default-block_sidebar hidden" id="tm-editoral-subscription">
    <div class="tm-editoral-subscription">
      <span class="tm-editoral-subscription__close" id="editoral-subscribe-close">
        <svg width="12" height="12">
          <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#close" />
        </svg>
      </span>

      <h3 class="tm-editoral-subscription__title">
        Редакторский дайджест
      </h3>
      <p class="tm-editoral-subscription__description">
        Присылаем лучшие статьи раз в месяц
      </p>
      <form method="POST" class="tm-editoral-subscription__form" id="editoral-subscribe">
        <input placeholder="Электропочта" name="email" type="email" id="editoral-subscribe-email" class="tm-editoral-subscription__input" />
        <input name="hl" type="hidden" value="ru" />
        <input name="fl" type="hidden" value="ru" />
        <button type="submit" class="tm-editoral-subscription__icon" id="editoral-subscribe-button">
          <svg width="24" height="24">
            <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-right" />
          </svg>
        </button>
      </form>
      <p class="tm-editoral-subscription__error hidden" id="editoral-subscribe-error"></p>
      <p class="tm-editoral-subscription__success hidden" id="editoral-subscribe-success">
        Скоро на этот адрес придет письмо. Подтвердите подписку, если всё в силе.
      </p>
  </div>
  <script>
    $(document).ready(function () {
      var block = $('#tm-editoral-subscription');
      var input = $('#editoral-subscribe-email');
      var button = $('#editoral-subscribe-button');
      var error = $('#editoral-subscribe-error');
      var success = $('#editoral-subscribe-success');

      var cookieOptions = {
        expires: 90,
        path: '/',
        secure: true,
      };

      if (!$.cookie('habr-editoral-subscription')) {
        block.removeClass('hidden');
      }

      $('#editoral-subscribe-close').click(function() {
        $.cookie('habr-editoral-subscription', 'close', cookieOptions);
        if (typeof ga === 'function') {
          ga('send', 'event', 'tm_block', 'edit-digest_post', 'close');
        }
        block.remove();
      });


      function onError(msg) {
        input.prop('disabled', false);
        button.prop('disabled', false);
        button.removeClass('loading');
        error.removeClass('hidden');
        error.text(msg);
      }

      $('#editoral-subscribe').submit(function (e) {
        var form = $(this);

        form.ajaxSubmit({
          url:'/json/digests/editorial/subscribe',
          dataType:'json',
          beforeSubmit: function() {
            input.prop('disabled', true);
            button.prop('disabled', true);
            error.addClass('hidden');
            button.addClass('loading');
          },
          error: function(err) {
            if (err.status !== 200) {
              onError(err.statusText);
            } else {
              onError(err);
            }
          },
          success: function(json) {
            if (json.system_errors) {
              onError(json.system_errors && json.system_errors[0]);
            } else {
              form.addClass('hidden');
              success.removeClass('hidden');
              button.removeClass('loading');
              $.cookie('habr-editoral-subscription', 'subscribe', cookieOptions);
              if (typeof ga === 'function') {
                ga('send', 'event', 'tm_block', 'edit-digest_post', 'subscribe');
              }
              setTimeout(function() {block.remove()}, 10000);
            }
          }
        });
        return false;
      });
    });
  </script>

      </div>
    </div>
  </section>

  <section class="column-wrapper">
    <div class="content_left">
      <div class="post-additionals">
          <ul class="post-stats post-stats_post js-user_" data-post-type="publish_ugc_ru,h_91,h_397,h_7026,h_17690,h_21370,f_develop" id="infopanel_post_680376">
          <li class="post-stats__item post-stats__item_voting-wjt">
            <div class="voting-wjt voting-wjt_post js-post-vote" data-id="680376" data-type="2">
              <button type="button" class="btn voting-wjt__button " data-action="plus" onclick="posts_vote_plus(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

              <span class="voting-wjt__counter   voting-wjt__counter_negative js-score" onclick="posts_vote_result(21, 10, 11)" title="Всего голосов 21: &uarr;10 и &darr;11">–1</span>

              <button type="button" class="btn voting-wjt__button " data-action="minus" title="Голосовать могут только зарегистрированные пользователи" onclick="posts_vote_minus(this);" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
            </div>
          </li>
    <li class="post-stats__item post-stats__item_bookmark">
      <button type="button" class="btn bookmark-btn bookmark-btn_post " data-post-type="publish_ugc_ru,h_91,h_397,h_7026,h_17690,h_21370,f_develop" data-type="2" data-id="680376" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в закладки" onclick="posts_add_to_favorite(this);" disabled>
        <span class="btn_inner"><svg class="icon-svg_bookmark" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="bookmark__counter js-favs_count" title="Количество пользователей, добавивших публикацию в закладки">21</span></span>
      </button>
    </li>

    <li class="post-stats__item post-stats__item_views">
      <div class="post-stats__views" title="Количество просмотров">
        <svg class="icon-svg_views-count" width="21" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-stats__views-count">4,9k</span>
      </div>
    </li>

      <li class="post-stats__item post-stats__item_comments">
          <a href="https://habr.com/ru/post/680376/#comments" class="post-stats__comments-link" rel="nofollow">
            <svg class="icon-svg_post-comments" width="16" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-stats__comments-count" id="post-stats-comments-count" title="Читать комментарии">25</span>
          </a>
      </li>


      <li class="post-stats__item post-stats__item_share">
        <div class="dropdown dropdown_share">
          <div href="https://habr.com/ru/post/680376/#comments" data-toggle="dropdown" class="post-stats__share" rel="nofollow">
            <svg class="icon-svg_post-share" width="24" height="24">
              <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#share">
            </svg>
            <span class="post-stats__comments-text" title="Поделиться">
              Поделиться
            </span>
          </div>

          <div class="dropdown-container">
            <div class="post-share">
  <ul class="post-share__buttons">
    <li class="post-share__item post-share__item_post">
      <span
        class="post-share__item-link post-share__item-link_normal post-share__item-link_copy"
        title="Скопировать ссылку"
        onclick="copyCurrentUrl(), $('.dropdown_share').removeClass('dropdown_active')"
      >
        Скопировать ссылку
      </span>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://habr.com/ru/post/680376/"
        class="post-share__item-link post-share__item-link_normal post-share__item-link_facebook"
        title="Facebook"
        onclick="window.open(this.href, 'Facebook', 'width=640,height=436,toolbar=0,status=0'); return false"
      >
        Facebook
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://twitter.com/intent/tweet?text=Humane+API+REST+Protocol+https://habr.com/p/680376/+via+%40habr_com"
        class="post-share__item-link post-share__item-link_normal post-share__item-link_twitter"
        title="Twitter"
        onclick="window.open(this.href, 'Twitter', 'width=800,height=300,resizable=yes,toolbar=0,status=0'); return false"
      >
        Twitter
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://vk.com/share.php?url=https://habr.com/ru/post/680376/"
        class="post-share__item-link post-share__item-link_normal post-share__item-link_vkontakte"
        title="ВКонтакте"
        onclick="window.open(this.href, 'ВКонтакте', 'width=800,height=300,toolbar=0,status=0'); return false"
      >
        ВКонтакте
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://t.me/share/url?url=https://habr.com/ru/post/680376/&title=Humane API REST Protocol"
        class="post-share__item-link post-share__item-link_normal post-share__item-link_telegram"
        title="Telegram"
        onclick="window.open(this.href, 'Telegram', 'width=800,height=300,toolbar=0,status=0'); return false"
      >
        Telegram
      </a>
    </li>
    <li class="post-share__item post-share__item_post">
      <a href="https://getpocket.com/edit?url=https://habr.com/ru/post/680376/&title=Humane API REST Protocol"
        class="post-share__item-link post-share__item-link_normal post-share__item-link_pocket"
        title="Pocket"
        target="_blank"
      >
        Pocket
      </a>
    </li>
  </ul>
</div>

          </div>
        </div>
      </li>






  </ul>

          
          <form action="/json/complaints/add/" class="form form_bordered form_abuse hidden" method="post" id="abuse_form">
  <input type="hidden" name="tt" value="2" />
  <input type="hidden" name="ti" value="680376" />

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"/></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Нарушение</legend>
    <input type="text" name="text" class="form__text-field" />
    <span class="form__desc">Опишите суть нарушения</span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled>Отправить</button>
  </div>
</form>


          <div class="author-panel author-panel_user">
            <div class="author-panel__user-info">
              <div class="user-info" data-user-login="nin-jin">
  <div class="user-info__stats">
      <div class="media-obj">
        <a href="https://habr.com/ru/users/nin-jin/" class="media-obj__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_bottom', 'profile', 'nin-jin');}">
            <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" width="48" height="48" class="media-obj__image-pic media-obj__image-pic_user"/>
        </a>

        <div class="media-obj__body media-obj__body_user-info">
              <a href="https://habr.com/ru/info/help/karma/" class="user-info__stats-item stacked-counter" title="683 голоса">
                <div class="stacked-counter__value stacked-counter__value_green ">5,0</div>
                <div class="stacked-counter__label">Карма</div>
              </a>

            <a href="https://habr.com/ru/info/help/karma/#rating" class="user-info__stats-item stacked-counter stacked-counter_rating" title="Рейтинг пользователя">
              <div class="stacked-counter__value stacked-counter__value_magenta">0,4</div>
              <div class="stacked-counter__label">Рейтинг</div>
            </a>
        </div>
      </div>

  </div>

  <div class="user-info__about">
    <div class="user-info__links">
        <a href="https://habr.com/ru/users/nin-jin/" class="user-info__fullname" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'nin-jin');}">Дмитрий Карловский</a>&nbsp;<a href="/users/nin-jin/" class="user-info__nickname user-info__nickname_doggy" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'nin-jin');}">nin-jin</a>
        
    </div>

      <div class="user-info__specialization">Full Stack Overflow</div>
  </div>
</div>

<div class="overlay hidden" id="js-donate">
  <div class="popup">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title js-popup_title" data-section="1">Платежная система</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide-donate">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#close" />
        </svg>
      </button>
    </div>
    <div class="popup__body js-donate-popup_body">
        <a class="js-donate-popup_link" href="https://money.yandex.ru/to/410015046302274" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'donation', 'pay_sender', '%guest%'); ga('send', 'event', 'donation', 'pay_receiver', 'nin-jin'); }">YooMoney</a>
    </div>
  </div>
</div>


            </div>
              <ul class="user-info__contacts inline-list">
        <li class="inline-list__item inline-list__item_contact-link"><a href="https://hyoo.ru">Сайт</a></li>
        <li class="inline-list__item inline-list__item_contact-link"><a href="https://twitter.com/_jin_nin_">Twitter</a></li>
        <li class="inline-list__item inline-list__item_contact-link"><a href="https://github.com/nin-jin/">Github</a></li>
  </ul>

          </div>
      </div>
    </div>
    <div class="sidebar_right">
    </div>
  </section>

  <section class="column-wrapper column-wrapper__last">
    <div class="content_left">
        

    <div class="default-block default-block_content">
      <div class="default-block__header default-block__header_large">
        <h2 class="default-block__header-title default-block__header-title_large">Похожие публикации</h2>
      </div>
      <div class="default-block__content">

        <ul class="content-list">
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">13 марта 2023 в 13:44</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/722014/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '1'); }">
                    Достаточно ли защищен ваш GraphQL API?
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item" title="Рейтинг">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg>
                      <span class="post-info__meta-counter">6</span>
                </span>
                <span class="post-info__meta-item" title="Количество просмотров">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">893</span>
                </span>
                <span class="post-info__meta-item" title="Закладки">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">25</span>
                </span>
                <a href="https://habr.com/ru/post/722014#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">0
                    
                  </span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">27 декабря 2022 в 10:00</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/707648/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '2'); }">
                    Опыт использования Tyk в качестве шлюза GraphQL API
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item" title="Рейтинг">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg>
                      <span class="post-info__meta-counter">9</span>
                </span>
                <span class="post-info__meta-item" title="Количество просмотров">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">1k</span>
                </span>
                <span class="post-info__meta-item" title="Закладки">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">17</span>
                </span>
                <a href="https://habr.com/ru/post/707648#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">0
                    
                  </span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">25 июля 2018 в 16:51</span>
                <h3 class="post-info__title post-info__title_large">
                  <a href="https://habr.com/ru/post/418203/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '3'); }">
                    GraphQL API (CRUD) на Go
                  </a>
                </h3>

              <div class="post-info__meta">
                <span class="post-info__meta-item" title="Рейтинг">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg>
                      <span class="post-info__meta-counter">18</span>
                </span>
                <span class="post-info__meta-item" title="Количество просмотров">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">14k</span>
                </span>
                <span class="post-info__meta-item" title="Закладки">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">89</span>
                </span>
                <a href="https://habr.com/ru/post/418203#comments" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">9
                    
                  </span>
                </a>
              </div>
            </li>
        </ul>

      </div>
    </div>

      <div class="default-block_content">
          

  <div class="promo-block promo-block_vacancies">
    <h2 class="promo-block__header">
      
      <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'blockname'); }" href="https://career.habr.com/vacancies" target="_blank" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=block_name&utm_campaign=vacancies_post" class="promo-block__title-link" rel="nofollow">
        Вакансии
      </a>
    </h2>

      <div class="promo-block__content">
        <ul class="content-list content-list_promo" >
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000120172" class="promo-item" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=vacancy&utm_campaign=vacancies_post" >
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Full-stack аналитик (системный и бизнес-анализ)</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="200000 rur">
                от 200 000
              </span>
              <span title="250000 rur">
                до 250 000
              </span>
          </span>
        <span class="promo-item__attrs-item">Банк «Открытие»</span>
        
        <span class="promo-item__attrs-item">Можно удаленно</span>
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000111929" class="promo-item" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=vacancy&utm_campaign=vacancies_post" >
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Системный аналитик </div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="150000 rur">
                от 150 000
              </span>
              <span title="200000 rur">
                до 200 000
              </span>
          </span>
        <span class="promo-item__attrs-item">Сбер</span>
        <span class="promo-item__attrs-item">Екатеринбург</span>
        
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000114594" class="promo-item" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=vacancy&utm_campaign=vacancies_post" >
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Middle Frontend Developer React (ОФИС)</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="120000 rur">
                от 120 000
              </span>
              <span title="180000 rur">
                до 180 000
              </span>
          </span>
        <span class="promo-item__attrs-item">SpectrumData</span>
        <span class="promo-item__attrs-item">Екатеринбург</span>
        
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000120718" class="promo-item" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=vacancy&utm_campaign=vacancies_post" >
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Веб-аналитик</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="100000 rur">
                от 100 000
              </span>
          </span>
        <span class="promo-item__attrs-item">FS Travel</span>
        <span class="promo-item__attrs-item">Москва</span>
        
      </div>
    </div>
  </a>

            </li>
            <li class="content-list__item content-list__item_promo">
              <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' } ga('send', 'event', 'tm_block', action, 'post'); }" href="https://career.habr.com/vacancies/1000120265" class="promo-item" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=vacancy&utm_campaign=vacancies_post" >
    <div class="promo-item__wrap">
      <div class="promo-item__title promo-item__title_hovered">Системный аналитик</div>
      <div class="promo-item__attrs">
          <span class="promo-item__attrs-item promo-item__amount_rur">
              <span title="250000 rur">
                от 250 000
              </span>
          </span>
        <span class="promo-item__attrs-item">Xploration Capital</span>
        
        <span class="promo-item__attrs-item">Можно удаленно</span>
      </div>
    </div>
  </a>

            </li>
        </ul>
      </div>

    <div class="promo-block__footer">
      <a onclick="if (typeof ga === 'function') { if (g_is_ugc_post) { var action = 'career_post' } else {  var action = 'career_feed' }  ga('send', 'event', 'tm_block', action, 'posts'); }" href="https://career.habr.com/vacancies/" data-utm="?utm_source=habr&utm_medium=habr_block&utm_content=vacancies_all&utm_campaign=vacancies_post" class="promo-block__footer-link promo-block__footer-link_selected" target="_blank" rel="nofollow">Больше вакансий на Хабр Карьере</a>
    </div>
  </div>


      </div>
      
    </div>
    <div class="sidebar">
      <div class="sidebar_right">
        <div class="default-block_content">
        </div>
      </div>
    </div>
  </section>

<section class="column-wrapper column-wrapper_comments js-comments-wrapper">
  <div class="content_left">
        <div class="comments-section" id="comments">
    <header class="comments-section__head">
      <h2 class="comments-section__head-title">
        Комментарии
        <span class="comments-section__head-counter" id="comments_count">
          25
        </span>
      </h2>
      
    </header>
    
    

    <ul class="content-list content-list_comments" id="comments-list">
        <li class="content-list__item content-list__item_comment js-comment " rel="24590356">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_24590356">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590356"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24590356">
          <a href="https://habr.com/ru/users/karambaso/" class="user-info user-info_inline"  data-user-login="karambaso">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">karambaso</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 12:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590356" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590356" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590356" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590356" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590356" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +8: &uarr;9 и &darr;1">+8</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><blockquote><p>Архитектурно можно выделить три основных подхода: <a href="https://ru.wikipedia.org/wiki/%D0%A3%D0%B4%D0%B0%D0%BB%D1%91%D0%BD%D0%BD%D1%8B%D0%B9_%D0%B2%D1%8B%D0%B7%D0%BE%D0%B2_%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D0%B4%D1%83%D1%80" rel="noopener noreferrer nofollow">RPC</a>, <a href="https://ru.wikipedia.org/wiki/REST" rel="noopener noreferrer nofollow">REST</a> и протоколы синхронизации</p></blockquote><p>Нельзя фронтендерам заниматься самолюбованием. Они не понимают, что изобретение велосипедов без серьёзной базы вызывает только смех.</p><p>Смешно вот что - автор серьёзно считате, что он сумел "выделить три основных подхода". Вместо одного RPC, он всё тот же RPC не увидел в своих двух оставшихся "основных подходах". То есть одно и то же, но с мелкими вариациями, автор выдаёт за кардинально различающиеся подходы.</p><p>Понятно, что после столь явного непонимания сути происходящего, он с радостью бросается расписывать столь же мелкие детали реализации своего велосипеда, видимо считая их опять чем-то вроде "основных подходов". Но это не так. Это обычная мелочь, мало кому интересная с точки зрения действительно основных подходов.</p><p>И за одно, чисто для справки - гуглы с фэйсбуками имеют бюджеты на сотни миллионов, направляемые на продвижение альтернатив тому, что описал автор статьи. Качество гуглово-фэйсбучных изделий, как минимум, не хуже качества предложения автора. Отсюда вопрос - чем автор решил завоевать мир?</p><p>Понятно, что автор считает свой вариант самым лучшим, но вот честно - этого мало. Даже при той настойчивости, с которой автор продвигает себя и свои изделия. Потому что бюджет рулит, а глубина замысла у автора явно не дотягивает.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_24590356">  <li class="content-list__item content-list__item_comment js-comment " rel="24590414">
    
    <span class="parent_id" data-parent_id="24590356"></span>
    <div class="comment" id="comment_24590414">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590414"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24590414">
          <a href="https://habr.com/ru/users/AcckiyGerman/" class="user-info user-info_inline"  data-user-login="AcckiyGerman">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">AcckiyGerman</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 12:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590414" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590414" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24590414" data-parent_id="24590356" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590356" class="icon_comment-arrow-up js-comment_parent" data-id="24590414" data-parent_id="24590356" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590414" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590414" data-parent_id="24590356" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590414" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +4: &uarr;4 и &darr;0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Просветите нас пожалуйста насчет </p><blockquote><p>действительно основных подходов</p></blockquote><p>Желательно, чтобы эти подходы через HTTP работали, мы же про "клиент-серверный" API в WEB среде говорим?</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_24590414"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="24590386">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_24590386">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590386"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24590386">
          <a href="https://habr.com/ru/users/dopusteam/" class="user-info user-info_inline"  data-user-login="dopusteam">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/d42/730/7fb/d427307fb2ba602efd199233f94b25a5.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">dopusteam</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 12:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590386" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590386" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590386" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590386" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590386" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +10: &uarr;11 и &darr;1">+10</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><blockquote><p>MarkedText&nbsp;— стройный легковесный язык разметки текста (убийца MarkDown).</p><p>Tree&nbsp;— структурированный формат представления данных (убийца JSON и XML</p></blockquote><p>При всем уважении, заявления про убийц вызывают недоверие и к представленному решению</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_24590386">  <li class="content-list__item content-list__item_comment js-comment " rel="24591164">
    
    <span class="parent_id" data-parent_id="24590386"></span>
    <div class="comment" id="comment_24591164">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24591164"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24591164">
          <a href="https://habr.com/ru/users/Fodin/" class="user-info user-info_inline"  data-user-login="Fodin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Fodin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 16:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24591164" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24591164" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24591164" data-parent_id="24590386" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590386" class="icon_comment-arrow-up js-comment_parent" data-id="24591164" data-parent_id="24590386" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24591164" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24591164" data-parent_id="24590386" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24591164" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: &uarr;1 и &darr;0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Не удивлюсь, если однажды появится статья про более компактный язык программирования (убийцу PERL). </p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_24591164">  <li class="content-list__item content-list__item_comment js-comment " rel="24591282">
    
    <span class="parent_id" data-parent_id="24591164"></span>
    <div class="comment" id="comment_24591282">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24591282"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24591282">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 17:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24591282" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24591282" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24591282" data-parent_id="24591164" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24591164" class="icon_comment-arrow-up js-comment_parent" data-id="24591282" data-parent_id="24591164" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24591282" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24591282" data-parent_id="24591164" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24591282" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: &uarr;1 и &darr;2">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  comment__message_downgrade comment__message_downgrade-1"><p>Появится, конечно, когда руки дойдут. Это будет что-то между лиспом и макро ассемблером с мощной системой стат анализа.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_24591282">  <li class="content-list__item content-list__item_comment js-comment " rel="24591730">
    
    <span class="parent_id" data-parent_id="24591282"></span>
    <div class="comment" id="comment_24591730">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24591730"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24591730">
          <a href="https://habr.com/ru/users/mikhail-edoshin/" class="user-info user-info_inline"  data-user-login="mikhail-edoshin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mikhail-edoshin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 19:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24591730" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24591730" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24591730" data-parent_id="24591282" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24591282" class="icon_comment-arrow-up js-comment_parent" data-id="24591730" data-parent_id="24591282" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24591730" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24591730" data-parent_id="24591282" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24591730" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Это интересно :)</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_24591730"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="24590522">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_24590522">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590522"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24590522">
          <a href="https://habr.com/ru/users/kozlyuk/" class="user-info user-info_inline"  data-user-login="kozlyuk">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/190/2ba/a97/1902baa97356d2fab1587b7b3f7c1d1a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kozlyuk</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 13:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590522" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590522" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590522" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590522" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590522" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +5: &uarr;5 и &darr;0">+5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  "><p>Не получилось и не могло получиться.<br>
Любой стандарт содержит компромиссы.<br>
Стандарт на всю конструкцию API, от транспорта до URI и структуры содержимого, будет содержать слишком много компромиссов, чтобы устроить значительное количество людей.</p><br>
<p>Критика REST несостоятельная:</p><br>
<blockquote>URI должен содержать лишь минимально необходимую информацию для идентификации самого ресурса, но не его положение в той или иной иерархии.</blockquote><p>Определяется задачей.<br>
Вы просто заточили решение под задачу, где все объекты можно глобально идентифицировать.<br>
В другой задаче /organizations/bifit/employees/dkozlyuk и /organizations/mpei/employees/dkozlyuk —<br>
это разные ресурсы, даже если они об одном человеке.<br>
А его глобально он идентифицируется как /people/dkozlyuk,<br>
причем через Link можно передать эту ссылку.</p><br>
<blockquote>Создание ресурса не является идемпотентным.</blockquote><p>Это проблема выражения Create через POST, а не проблема REST.</p><br>
<blockquote>Удаление ресурса нарушает ссылочную целостность. И если в рамках нашей системы мы можем обновить или удалить все ссылки, то внешние системы так и продолжат ссылаться в никуда. Поэтому предпочтительнее ресурсы не удалять полностью, а лишь помечать скрытыми.</blockquote><p>Где <em>representational</em> state transfer, и где ссылочная челостность в хранилище данные (а где еще помечать как удаленные?).<br>
Почему это сделано заботой клиентов?<br>
Что мешает в классическом REST отдавать Gone / Moved Permanently + Link: rel=archive...?</p><br>
<blockquote>Таким образом для нашего протокола хватит лишь двух HTTP-методов:<br>
<ul>
<li>GET для чтения.</li>
<li>PATCH для обновления.</li>
</ul><br>
</blockquote><p>RFC 5789: PATCH is neither safe nor idempotent as defined by [RFC 2616], Section 9.1.<br>
Из примеров видно, что вы бывший PUT имитируете через PATCH к другому ресурсу, видимо, <em>подразумевая</em> идемпотентность.</p><br>
<p>Идея пустить все через websocket — полный ужас:</p><br>
<ul>
<li>Занимаемся не своим прикладного уровня делом.</li>
<li>Если канал один, теряем асинхронность, а если их несколько, зачем в одном канале двусторонний стриминг.</li>
</ul><br>
<p>Часть, связанная с выбором данных, отличается от альтернатив лишь синтаксисом (это мишура) и жестко заданной моделью (а это компромисс), без радикальных преимуществ.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_24590522">  <li class="content-list__item content-list__item_comment js-comment " rel="24590628">
    
    <span class="parent_id" data-parent_id="24590522"></span>
    <div class="comment" id="comment_24590628">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590628"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24590628">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 14:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590628" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590628" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24590628" data-parent_id="24590522" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590522" class="icon_comment-arrow-up js-comment_parent" data-id="24590628" data-parent_id="24590522" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590628" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590628" data-parent_id="24590522" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590628" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: &uarr;1 и &darr;2">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  comment__message_downgrade comment__message_downgrade-1"><blockquote><p>В другой задаче /organizations/bifit/employees/dkozlyuk и /organizations/mpei/employees/dkozlyuk —это разные ресурсы, даже если они об одном человеке.  </p></blockquote><p>Эти ресурсы не о людях, а о работниках:</p><pre><code>_query
    \employee[org;person;salary]
        reply
            \employee=123
            \employee=456
    \person[name;employee]
employee
    \123
        org \org=ACME
        person \person=dkozlyuk
        salary 9000
    \456
        org \org=ECMA
        person \person=dkozlyuk
        salary 100500
person
    \person=dkozlyuk
        name \Дмитрий Козлюк
        employee
            \employee=123
            \employee=456</code></pre><blockquote><p>Где&nbsp;<em>representational</em>&nbsp;state transfer, и где ссылочная челостность в хранилище  </p></blockquote><p>Речь про ссылочную целостность всей сети, а не отдельного хранилища. </p><blockquote><p>RFC 5789: PATCH is neither safe nor idempotent as defined by [RFC 2616], Section 9.1.  </p></blockquote><p>A PATCH request can be issued in such a way as to be idempotent, which also helps prevent bad outcomes from collisions between two PATCH requests on the same resource in a similar time frame.</p><blockquote><p>Из примеров видно, что вы бывший PUT имитируете через PATCH к другому ресурсу, видимо,&nbsp;<em>подразумевая</em>&nbsp;идемпотентность.</p></blockquote><p>PUT потребовал бы передачу всего графа. Тут же передаётся именно diff.</p><blockquote><p>Если канал один, теряем асинхронность  </p></blockquote><p>Не теряем. Запросы посылаются независимо от прихода ответов и уведомлений.</p><p></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_24590628">  <li class="content-list__item content-list__item_comment js-comment " rel="24590912">
    
    <span class="parent_id" data-parent_id="24590628"></span>
    <div class="comment" id="comment_24590912">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590912"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24590912">
          <a href="https://habr.com/ru/users/kozlyuk/" class="user-info user-info_inline"  data-user-login="kozlyuk">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/190/2ba/a97/1902baa97356d2fab1587b7b3f7c1d1a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kozlyuk</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#pencil" /></svg>
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 15:27</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590912" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590912" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24590912" data-parent_id="24590628" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590628" class="icon_comment-arrow-up js-comment_parent" data-id="24590912" data-parent_id="24590628" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590912" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590912" data-parent_id="24590628" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590912" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: &uarr;3 и &darr;0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  "><blockquote>Эти ресурсы не о людях, а о работниках</blockquote><p>О том и речь. Альтернативные пути не зарождаются сами. Либо автор API решил, что бывает удобно так и этак, тогда выбирать не нужно + есть Link: rel=canonical. Либо были объективные причины продублировать, например, все ресурсы организации требовалось поместить под одним префиксом для какого-нибудь внешнего проксирования или контроля доступа.</p><br>
<blockquote>Речь про ссылочную целостность всей сети, а не отдельного хранилища. </blockquote><p>Весь подход основан на том, что у нас не ресурсы, определяемые адресами, а объекты, которые можно найти. Значит, про ссылочную целостность мы вообще не говорим, с точки зрения модели данных никаких внешних ссылок нет, есть только объекты и поисковые запросы. Прекрасно! Зачем гвоздями прибивать soft delete, который есть деталь реализации? Какие запросы будут и не будут находить объект, который я пометил удаленным?</p><br>
<p>&quot;A PATCH request can be issued in such a way as to be idempotent&quot; не позволяет понять про кокнертный запрос, будет ли он таковым. У вас PATCH / является идемпотентным по соглашению? Как серверу отличить повторный запрос на создание от конфликта? Это по меньшей мере пробел в спецификации. Моделировать создание как применение diff'а к пустому объекту заманчиво, но семантически спорно, даже если это можно так изобразить (как git diff).</p><br>
<blockquote>Не теряем [асинхронность]. Запросы посылаются независимо от прихода ответов и уведомлений.</blockquote><p>Отлично, то есть канал не один, раз запросы идет асинхронно. Тогда зачем WATCH и FORGET, если можно сделать GET с потенциально бесконечным ответом и PATCH к источнику уведомлений, чтобы их включать и выключать?</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_24590912">  <li class="content-list__item content-list__item_comment js-comment " rel="24590978">
    
    <span class="parent_id" data-parent_id="24590912"></span>
    <div class="comment" id="comment_24590978">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590978"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24590978">
          <a href="https://habr.com/ru/users/mayorovp/" class="user-info user-info_inline"  data-user-login="mayorovp">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mayorovp</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 15:45</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590978" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590978" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24590978" data-parent_id="24590912" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590912" class="icon_comment-arrow-up js-comment_parent" data-id="24590978" data-parent_id="24590912" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590978" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590978" data-parent_id="24590912" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590978" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: &uarr;1 и &darr;0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  "><blockquote>Отлично, то есть канал не один, раз запросы идет асинхронно.</blockquote><p>Справедливости ради, нет никакой проблемы передать произвольное число асинхронных запросов через один веб-сокет.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_24590978"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="24590986">
    
    <span class="parent_id" data-parent_id="24590912"></span>
    <div class="comment" id="comment_24590986">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24590986"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24590986">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#pencil" /></svg>
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 15:49</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24590986" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24590986" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24590986" data-parent_id="24590912" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590912" class="icon_comment-arrow-up js-comment_parent" data-id="24590986" data-parent_id="24590912" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24590986" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24590986" data-parent_id="24590912" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24590986" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><blockquote><p>Альтернативные пути не зарождаются сами. Либо автор API решил, что бывает удобно так и этак </p></blockquote><p>Это 3 разных ресурса, доступных по 3 разным URI. Нет никакого смысла иметь несколько URI для одного ресурса.</p><blockquote><p>были объективные причины продублировать, например, все ресурсы организации требовалось поместить под одним префиксом для какого-нибудь внешнего проксирования или контроля доступа  </p></blockquote><p>Это реализуется через разные endpoint. Впрочем, при чём тут контроль доступа или проксирование не очень понял.</p><blockquote><p>У вас PATCH / является идемпотентным по соглашению?  </p></blockquote><p>Конечно.</p><blockquote><p>Как серверу отличить повторный запрос на создание от конфликта?  </p></blockquote><p>Никак, ибо в этой модели нет никакого создания. Все возможные сущности виртуально существуют и могут быть изменены.</p><blockquote><p>Отлично, то есть канал не один, раз запросы идет асинхронно.  </p></blockquote><p>WebSocket канал один. Послал один WATCH и сидишь, спокойно получаешь данные как на текущий момент, так и при каждом их обновлении. FORGET нужен, чтобы перестать их получать.</p><p></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_24590986">  <li class="content-list__item content-list__item_comment js-comment " rel="24591432">
    
    <span class="parent_id" data-parent_id="24590986"></span>
    <div class="comment" id="comment_24591432">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24591432"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24591432">
          <a href="https://habr.com/ru/users/kozlyuk/" class="user-info user-info_inline"  data-user-login="kozlyuk">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/190/2ba/a97/1902baa97356d2fab1587b7b3f7c1d1a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kozlyuk</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 17:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24591432" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24591432" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24591432" data-parent_id="24590986" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24590986" class="icon_comment-arrow-up js-comment_parent" data-id="24591432" data-parent_id="24590986" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24591432" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24591432" data-parent_id="24590986" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24591432" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  "><blockquote>Это 3 разных ресурса, доступных по 3 разным URI.</blockquote><p>Да, неудачные примеры: лайки в статье очевидно один и тот же ресурс, эти очевидно разные. Возьмем удаленное сообщение: /chat/1/message/999 не существует с момента удаления, /user/2/message/999 доступно в архиве. А что я должен получить по запросу message=999?</p><br>
<blockquote>Нет никакого смысла иметь несколько URI для одного ресурса.</blockquote><p>/version/1.2, /version/latest</p><br>
<blockquote>Это реализуется через разные endpoint.</blockquote><p>Разные endpoint — это не несколько URI для одного ресурса?</p><br>
<blockquote>Впрочем, при чём тут контроль доступа или проксирование не очень понял.</blockquote><p>Фильтр по URI записывается тривиально и работает для любой системы, в которой URI соответствуют требованиям. Фильтр результатов поиска завязан на логику системы и должен анализировать запрос.</p><br>
<blockquote>Все возможные сущности виртуально существуют и могут быть изменены.</blockquote><p>На самом деле, нет, потому что для идемпотентного <code>PATCH /</code> вы должны особым образом обрабатывать начальное пустое состояние. Иначе замена пустоты на значение не отличается от замены значения на значение. По факту это PUT, только почему-то для него вы пожадничали оставить метод, а для подписок нет. Между тем, промежуточные узлы от PUT выиграли бы, так как о его идемпотентности они знают.</p><br>
<p>Про websocket'ы я не в курсе, под каналом понимаю синхронный канал. Вопрос был в необходимости иметь специальные методы. Впрочем, так как нет URI, а только запросы, то специального URI для управления подписками нет, и методы вполне годятся.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_24591432">  <li class="content-list__item content-list__item_comment js-comment " rel="24591524">
    
    <span class="parent_id" data-parent_id="24591432"></span>
    <div class="comment" id="comment_24591524">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24591524"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24591524">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 18:01</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24591524" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24591524" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24591524" data-parent_id="24591432" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24591432" class="icon_comment-arrow-up js-comment_parent" data-id="24591524" data-parent_id="24591432" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24591524" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24591524" data-parent_id="24591432" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24591524" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><blockquote><p>А что я должен получить по запросу message=999?  </p></blockquote><pre><code>_query
    \message=999[chat[message];author[message]]
        reply \message=999
message
    \999
        chat \chat=1
        author \user=2
chat
    \1
        message
user
    \2
        message \message=999
</code></pre><blockquote><p>Разные endpoint — это не несколько URI для одного ресурса?  </p></blockquote><p>В HARP сущности идентифицируются относительно endpoint. </p><blockquote><p>Фильтр по URI записывается тривиально и работает для любой системы, в которой URI соответствуют требованиям.  </p></blockquote><p>Это дырка в безопасности, через которую можно получить доступ ко всем косвенно связанным ресурсам через один доступный снаружи ресурс. Не делайте так. </p><blockquote><p>Иначе замена пустоты на значение не отличается от замены значения на значение.  </p></blockquote><p>Они в модели HARP и не отличаются. </p><p></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_24591524">  <li class="content-list__item content-list__item_comment js-comment " rel="24592228">
    
    <span class="parent_id" data-parent_id="24591524"></span>
    <div class="comment" id="comment_24592228">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592228"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24592228">
          <a href="https://habr.com/ru/users/kozlyuk/" class="user-info user-info_inline"  data-user-login="kozlyuk">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/190/2ba/a97/1902baa97356d2fab1587b7b3f7c1d1a.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kozlyuk</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 23:18</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592228" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592228" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24592228" data-parent_id="24591524" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24591524" class="icon_comment-arrow-up js-comment_parent" data-id="24592228" data-parent_id="24591524" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592228" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592228" data-parent_id="24591524" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592228" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: &uarr;1 и &darr;2">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_downgrade comment__message_downgrade-1"><p>Как сервер понял, что надо формировать ответ для архива, а не для чата (тогда ответ был бы &quot;ничего не найдено&quot;)? Ресурсы существуют независимо от ссылок, но в основе REST лежит принцип, что какой ресурс будет по ссылке, определяется при обращении (late binding). HARP это решительно отвергает.</p><br>
<blockquote>Иначе замена пустоты на значение не отличается от замены значения на значение.<br>
<br>
Они в модели HARP и не отличаются.</blockquote><p>Отличаются для <code>PATCH /</code>, чтобы он был идемпотентным. В норме два запроса, заменяющих пустые поля объекта заполенными, применить нельзя, потому что второй обнаружит, что ожидаемых пустых полей уже нет (это ожидание может быть выражено как в diff, так и If-None-Match). Замечу, что запросы &quot;установить значения части полей, что бы там ни было раньше&quot; — это RPC, а не state transfer, потому что какой получится state, мы не знаем.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_24592228">  <li class="content-list__item content-list__item_comment js-comment " rel="24592270">
    
    <span class="parent_id" data-parent_id="24592228"></span>
    <div class="comment" id="comment_24592270">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592270"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24592270">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#pencil" /></svg>
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 23:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592270" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592270" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24592270" data-parent_id="24592228" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24592228" class="icon_comment-arrow-up js-comment_parent" data-id="24592270" data-parent_id="24592228" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592270" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592270" data-parent_id="24592228" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592270" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;0 и &darr;0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><blockquote><p>Как сервер понял, что надо формировать ответ для архива, а не для чата (тогда ответ был бы "ничего не найдено")?  </p></blockquote><p>Так тут и нет никакого архива. Чат пустой. Сообщение лежит по своему URI. При желании можно добавить в него поле deleted, но тут хватило и простого убирания из чата.</p><blockquote><p>REST лежит принцип, что какой ресурс будет по ссылке, определяется при обращении (late binding). HARP это решительно отвергает.  </p></blockquote><p>Без понятия о чём вы, но в <a href="https://ru.wikipedia.org/wiki/REST" rel="noopener noreferrer nofollow">REST</a> ничего похожего нет.</p><blockquote><p>Отличаются для&nbsp;<code>PATCH /</code>, чтобы он был идемпотентным.&nbsp;  </p></blockquote><p>А ничего, что по определению <a href="https://ru.wikipedia.org/wiki/%D0%98%D0%B4%D0%B5%D0%BC%D0%BF%D0%BE%D1%82%D0%B5%D0%BD%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C" rel="noopener noreferrer nofollow">идемпотентности</a> они отличаться не могут в принципе?</p><blockquote><p>Замечу, что запросы "установить значения части полей, что бы там ни было раньше" — это RPC, а не state transfer, потому что какой получится state, мы не знаем.  </p></blockquote><p>Нет, это Last Write Wins стратегия разрешения конфликтов. И какой получится стейт мы как раз знаем. Если вам так будет проще, то это можно считать мультиплексированным PUT, гранулированный до отдельных полей. Но лучше всё же принять, что PATCH - это не "так как в гите".</p><p></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_24592270"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="24592088">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_24592088">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592088"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24592088">
          <a href="https://habr.com/ru/users/kpmy/" class="user-info user-info_inline"  data-user-login="kpmy">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kpmy</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">2 августа 2022 в 22:09</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592088" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592088" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592088" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592088" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592088" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: &uarr;0 и &darr;1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  comment__message_downgrade comment__message_downgrade-1"><p>Каждому хочется написать свой язык разметки <a href="https://habr.com/ru/post/305168/" rel="noopener noreferrer nofollow">https://habr.com/ru/post/305168/</a></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_24592088"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="24592802">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_24592802">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592802"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24592802">
          <a href="https://habr.com/ru/users/mikhail-edoshin/" class="user-info user-info_inline"  data-user-login="mikhail-edoshin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mikhail-edoshin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 09:19</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592802" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592802" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592802" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592802" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592802" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: &uarr;1 и &darr;0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Мне нравится. Насчет ключей -- я бы наоборот предпочел натуральный ключ там, где он есть. Например, <code>country=ru</code>, <code>airport=svo</code> , <code>book=9780735619678</code>. И по отношению RPC/REST -- RPC предполагает, что мы обращаемся к объектам с уникальным поведением, а REST -- что мы работаем с хранилищем или что есть только один тип объекта «данные» с разными полями, и поведение у него одно -- создать, изменить, удалить. Идея объектов включает в себя идею данных, так что это не разные вещи, а одно -- подмножество другого. Если делать API к системе, которая не просто хранит данные, а как-то себя ведет (атомный реактор), то без концепции вызова методов не обойтись.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_24592802">  <li class="content-list__item content-list__item_comment js-comment " rel="24592878">
    
    <span class="parent_id" data-parent_id="24592802"></span>
    <div class="comment" id="comment_24592878">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592878"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24592878">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#pencil" /></svg>
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 09:42</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592878" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592878" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24592878" data-parent_id="24592802" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24592802" class="icon_comment-arrow-up js-comment_parent" data-id="24592878" data-parent_id="24592802" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592878" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592878" data-parent_id="24592802" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592878" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Даже в тех случаях, когда кажется, что без вызова метода никак, просто создаётся ресурс "задача". Эту задачу можно читать, искать, мониторить ход её выполнения, обновлять, реагировать на изменения её статуса, ставить на паузу, отменять, перезапускать. В общем, работать с ней как с любым другим ресурсом.</p><p></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_24592878">  <li class="content-list__item content-list__item_comment js-comment " rel="24592966">
    
    <span class="parent_id" data-parent_id="24592878"></span>
    <div class="comment" id="comment_24592966">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592966"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24592966">
          <a href="https://habr.com/ru/users/mikhail-edoshin/" class="user-info user-info_inline"  data-user-login="mikhail-edoshin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mikhail-edoshin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 10:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592966" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592966" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24592966" data-parent_id="24592878" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24592878" class="icon_comment-arrow-up js-comment_parent" data-id="24592966" data-parent_id="24592878" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592966" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592966" data-parent_id="24592878" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592966" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +2: &uarr;2 и &darr;0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Это да, метод в любом случае вызывается с помощью какого-то сообщения, и такое сообщение -- это тоже данные, которые мы добавляем, по сути, в журнал сообщений. Но тогда ресурсы уже не должны поддерживать <code>PATCH</code>, потому что данные их будут меняться не любым залетным запросом, а специально обученным методом. <code>GET</code> остается без ограничений. Хотя для методов можно приспособить<code>POST</code> -- посылать сообщения непосредственно ресурсу.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_24592966">  <li class="content-list__item content-list__item_comment js-comment " rel="24592992">
    
    <span class="parent_id" data-parent_id="24592966"></span>
    <div class="comment" id="comment_24592992">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24592992"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24592992">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 10:13</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24592992" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24592992" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24592992" data-parent_id="24592966" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24592966" class="icon_comment-arrow-up js-comment_parent" data-id="24592992" data-parent_id="24592966" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24592992" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24592992" data-parent_id="24592966" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24592992" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Если вам нужно изменить данные - просто меняйте эти данные. Отдельная задача вам тут не нужна. Исключение - когда изменения должны поддерживать аудит. Тогда на каждое изменение создаётся новая "проводка".</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_24592992">  <li class="content-list__item content-list__item_comment js-comment " rel="24593202">
    
    <span class="parent_id" data-parent_id="24592992"></span>
    <div class="comment" id="comment_24593202">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24593202"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24593202">
          <a href="https://habr.com/ru/users/mikhail-edoshin/" class="user-info user-info_inline"  data-user-login="mikhail-edoshin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mikhail-edoshin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 10:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24593202" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24593202" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24593202" data-parent_id="24592992" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24592992" class="icon_comment-arrow-up js-comment_parent" data-id="24593202" data-parent_id="24592992" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24593202" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24593202" data-parent_id="24592992" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24593202" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +3: &uarr;3 и &darr;0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Аудит нужен не всегда, но всегда нужна корректность. Если я единственный клиент своего API, то мне все равно, я могу обеспечить корректность на стороне клиента, а API в таком случае превращается в API к системе хранения, которая о корректности не заботится, разве что о правах доступах. Но если я не единственный клиент? Тогда я могу только перенести свой корректный код на сторону API и назначить его там <s>любимой женой</s> единственным способом изменения данных, то есть методом.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_24593202">  <li class="content-list__item content-list__item_comment js-comment " rel="24593230">
    
    <span class="parent_id" data-parent_id="24593202"></span>
    <div class="comment" id="comment_24593230">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24593230"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24593230">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 11:08</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24593230" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24593230" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24593230" data-parent_id="24593202" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24593202" class="icon_comment-arrow-up js-comment_parent" data-id="24593230" data-parent_id="24593202" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24593230" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24593230" data-parent_id="24593202" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24593230" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;0 и &darr;0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Валидировать данные надо в любом случае. И лучше делать это в одно месте, а не в десятках мутационных методов.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_24593230">  <li class="content-list__item content-list__item_comment js-comment " rel="24593496">
    
    <span class="parent_id" data-parent_id="24593230"></span>
    <div class="comment" id="comment_24593496">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24593496"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="24593496">
          <a href="https://habr.com/ru/users/mikhail-edoshin/" class="user-info user-info_inline"  data-user-login="mikhail-edoshin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mikhail-edoshin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 12:31</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24593496" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24593496" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24593496" data-parent_id="24593230" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24593230" class="icon_comment-arrow-up js-comment_parent" data-id="24593496" data-parent_id="24593230" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24593496" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24593496" data-parent_id="24593230" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24593496" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Всего голосов +1: &uarr;1 и &darr;0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Соглашусь про одно место, но на мой взгляд одно место -- это как раз одна инструкция по изменению объекта, которой мы передаем описание изменения -- что нужно сделать (имя метода) и детали (параметры). Исторически сложилось так, что диспетчеризация в начале инструкции выглядит для нас как десяток методов, но вообще это части одного целого. Параметры тоже нужно проверять, конечно, но это проще, чем сравнивать старое и новое состояние объекта (а в общем случае это будут два множества объектов) и определять, корректно так менять или нет.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_24593496">  <li class="content-list__item content-list__item_comment js-comment " rel="24593602">
    
    <span class="parent_id" data-parent_id="24593496"></span>
    <div class="comment" id="comment_24593602">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="24593602"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="24593602">
          <a href="https://habr.com/ru/users/nin-jin/" class="user-info user-info_inline"  data-user-login="nin-jin">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <img src="//habrastorage.org/getpro/habr/avatars/20a/0ad/d8c/20a0add8ce3ddddec0e521f86e694f40.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24" />
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">nin-jin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">3 августа 2022 в 13:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_24593602" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="24593602" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="24593602" data-parent_id="24593496" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#tree" /></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_24593496" class="icon_comment-arrow-up js-comment_parent" data-id="24593602" data-parent_id="24593496" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_24593602" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="24593602" data-parent_id="24593496" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="24593602" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter   js-score" title="Всего голосов 0: &uarr;1 и &darr;1">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  "><p>Всё, вами перечисленное, одинаково справедливо для любого подхода. Надо ли учитывать предыдущее состояние определяется вашей прикладной областью, а не моделью доступа к ней.</p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-7" id="reply_comments_24593602"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="25103138">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_25103138">
      <span class="comment__collapse" title="Свернуть/развернуть ветку комментариев" data-id="25103138"></span>
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="25103138">
          <a href="https://habr.com/ru/users/win32nipuh/" class="user-info user-info_inline"  data-user-login="win32nipuh">
  <div class="user-comment__container user-info__image-pic user-info__image-pic_small">
      <svg class="user-info__image-pic user-info__image-pic_small default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#slug" /></svg>
  </div>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">win32nipuh</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">12 января 2023 в 12:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_25103138" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#anchor" /></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <button class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="25103138" data-action="add" title="Только зарегистрированные пользователи могут добавлять комментарии в избранное" disabled><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg></button>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_25103138" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="25103138" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#rounded-arrow" /></svg></a>
  </li>
</ul>

           <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="25103138" data-post-target="680376" data-type="3">
   <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Всего голосов –1: &uarr;0 и &darr;1">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#vote-arrow" /></svg></button>
  </div>

        </div>

        <div class="comment__message  comment__message_v2  comment__message_downgrade comment__message_downgrade-1"><p>"Tree — структурированный формат представления данных (убийца JSON и XML"</p><p> О, как! Глупый мир не догадывался....И когда же ждать этого убивца? </p><p></p><p>"Они экранируются при использовании encodURIComponent" -&gt; encodeURIComponent</p><p><br></p><p></p></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_25103138"></ul>
  </li>

      
    </ul>
      <div class="js-form_placeholder">
                <p class="for_users_only_msg">Только&nbsp;<a href="/info/help/registration/">полноправные пользователи</a> могут оставлять комментарии. <a href="https://habr.com/ru/auth/login/">Войдите</a>, пожалуйста.</p>

      </div>
  </div>


  </div>
  <div class="sidebar">
    <div class="sidebar_right sidebar_comments js-sidebar_right">
          

  <div class="js-ad_sticky_comments">
    <div class="default-block">
      <div class="default-block__header">
        <h3 class="default-block__header-title">Что обсуждают</h3>
      </div>

      <div class="default-block__content default-block__content_most-comments" id="broadcast_tabs_comments">
        <ul class="toggle-menu toggle-menu_most-comments">
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_now" class="toggle-menu__item-link active" rel="nofollow">Сейчас</a>
          </li>
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_yesterday" class="toggle-menu__item-link" rel="nofollow">Вчера</a>
          </li>
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_week" class="toggle-menu__item-link" rel="nofollow">Неделя</a>
          </li>
        </ul>

          <div class="tabs__content" id="broadcast_comments_now">
              <ul class="content-list content-list_most-comments" >
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/news/t/722496/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">YouTube TV тестирует мультипросмотр, позволяющий смотреть четыре программы одновременно</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">611</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/722496/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">10
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/news/t/722564/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Соцсеть «Россграм» начала поиск инвесторов — им обещают доходность 950% за три года</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">2,6k</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/722564/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">13
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/news/t/722432/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Найдена химическая реакция, которая могла запустить появление жизни на Земле</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">1,8k</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/722432/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">5
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/722562/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Износ основных средств — мобильное приложение на Flutter</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">494</span>
                    </span>
                    <a href="https://habr.com/ru/post/722562/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">3
                      
                      </span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
          <div class="tabs__content" id="broadcast_comments_yesterday">
              <ul class="content-list content-list_most-comments" >
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/722346/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Отвыкнуть от шума, или персональная камера сенсорной депривации</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">8,3k</span>
                    </span>
                    <a href="https://habr.com/ru/post/722346/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">150
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/722330/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Почему мужикам нужно качать орех?</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">24,3k</span>
                    </span>
                    <a href="https://habr.com/ru/post/722330/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">119
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/company/getmatch/blog/722246/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Сколько получают российские разработчики: наше исследование</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">26,2k</span>
                    </span>
                    <a href="https://habr.com/ru/company/getmatch/blog/722246/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">98
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/company/bastion/blog/721986/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Вас похекали! Как мы приносим клиентам дурные вести из Даркнета</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">19,5k</span>
                    </span>
                    <a href="https://habr.com/ru/company/bastion/blog/721986/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">45
                      
                      </span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
          <div class="tabs__content" id="broadcast_comments_week">
              <ul class="content-list content-list_most-comments" >
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/722048/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Инцелы — нищие в мире сексуального капитализма</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">26,1k</span>
                    </span>
                    <a href="https://habr.com/ru/post/722048/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">762
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/721644/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">GPT-3. Есть проблема побольше, чем потеря рабочих мест</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">50,6k</span>
                    </span>
                    <a href="https://habr.com/ru/post/721644/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">529
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/company/timeweb/blog/720722/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">51 год автору WinRAR и FAR Manager</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">33,3k</span>
                    </span>
                    <a href="https://habr.com/ru/company/timeweb/blog/720722/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">493
                      
                      </span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/ru/post/721646/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Мнение: DevOps — это раковая опухоль</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">62,4k</span>
                    </span>
                    <a href="https://habr.com/ru/post/721646/#comments" class="post-info__meta-item" rel="nofollow">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">405
                      
                      </span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

    </div>
  </div>
  </section>


  <script type="text/javascript">
    var userLabel = 'reader';
  </script>

  


        </div>
      </div>

        <div class="layout__row layout__row_promo-blocks">
          <div class="layout__cell">
            <section class="column-wrapper column-wrapper_bottom column-wrapper_bordered">
  <div class="content_left">
    


  <div class="default-block default-block_content">
    <div class="default-block__header default-block__header_large">
      <h2 class="default-block__header-title default-block__header-title_large">Самое читаемое</h2>
    </div>
    <div class="default-block__content default-block__content_most-read" id="broadcast_tabs_posts">
      <ul class="toggle-menu toggle-menu__most-read">
        <li class="toggle-menu__item">
          <a href="#broadcast_posts_today" class="toggle-menu__item-link active" rel="nofollow">Сутки</a>
        </li>
        <li class="toggle-menu__item">
          <a href="#broadcast_posts_week" class="toggle-menu__item-link" rel="nofollow">Неделя</a>
        </li>
        <li class="toggle-menu__item">
          <a href="#broadcast_posts_month" class="toggle-menu__item-link" rel="nofollow">Месяц</a>
        </li>
      </ul>

        <div class="tabs__content tabs__content_reading" id="broadcast_posts_today">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/news/t/722390/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">OpenAI выпустила GPT-4</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;38</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">32,9k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">18</span>
                    </span>
                    <a href="https://habr.com/ru/news/t/722390/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        117
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/722330/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Почему мужикам нужно качать орех?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;33</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">24,3k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">116</span>
                    </span>
                    <a href="https://habr.com/ru/post/722330/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        119
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/getmatch/blog/722246/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Сколько получают российские разработчики: наше исследование</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;96</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">26,2k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">105</span>
                    </span>
                    <a href="https://habr.com/ru/company/getmatch/blog/722246/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        98
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/bastion/blog/721986/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Вас похекали! Как мы приносим клиентам дурные вести из Даркнета</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;49</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">19,5k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">96</span>
                    </span>
                    <a href="https://habr.com/ru/company/bastion/blog/721986/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        45
                        
                      </span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_week">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/721646/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Мнение: DevOps — это раковая опухоль</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;174</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">62,4k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">112</span>
                    </span>
                    <a href="https://habr.com/ru/post/721646/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        405
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/721742/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Крах Silicon Valley Bank: как и почему лопнул главный банк техно-стартаперов Кремниевой долины</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;116</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">51,4k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">52</span>
                    </span>
                    <a href="https://habr.com/ru/post/721742/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        81
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/721644/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">GPT-3. Есть проблема побольше, чем потеря рабочих мест</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;109</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">50,6k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">117</span>
                    </span>
                    <a href="https://habr.com/ru/post/721644/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        529
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/721512/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Странная функция Telegram</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;103</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">44,1k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">87</span>
                    </span>
                    <a href="https://habr.com/ru/post/721512/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        112
                        
                      </span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_month">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/497464/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Всё, что вы НЕ хотели бы знать о сервисах онлайн знакомств… [много букОв и иллюстраций + регулярно дополняется]</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;269</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">112k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">373</span>
                    </span>
                    <a href="https://habr.com/ru/post/497464/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        760
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/company/productivity_inside/blog/717108/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">20 уроков, которые я вынес из 20 лет работы программистом</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;150</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">98,6k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">446</span>
                    </span>
                    <a href="https://habr.com/ru/company/productivity_inside/blog/717108/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        115
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/718996/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">О «раздутом пузыре» нейросетей</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;131</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">84,6k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">237</span>
                    </span>
                    <a href="https://habr.com/ru/post/718996/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        171
                        
                      </span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/ru/post/718308/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'post'); }">Судя по новым данным, фундаментальная модель Вселенной неверна</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item" title="Рейтинг">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#arrow-bold" /></svg><span class="post-info__meta-counter">&plus;74</span>
                    </span>
                    <span class="post-info__meta-item" title="Количество просмотров">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#eye" /></svg><span class="post-info__meta-counter">79,6k</span>
                    </span>
                    <span class="post-info__meta-item" title="Закладки">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#book" /></svg><span class="post-info__meta-counter">70</span>
                    </span>
                    <a href="https://habr.com/ru/post/718308/#comments" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block',  'most_read,post' , 'comment'); }" class="post-info__meta-item" rel="nofollow" title="Комментарии">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#comment" /></svg><span class="post-info__meta-counter">
                        303
                        
                      </span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

  </div>

  <div class="sidebar">
    <div class="sidebar_right">
    </div>
  </div>
</section>

          </div>
        </div>

      <div class="layout__row layout__row_footer-links">
        <div class="layout__cell">
          <div class="footer-grid footer-grid_menu">
  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">
      Ваш аккаунт
    </h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
          <li class="footer-menu__item">
            <a href="https://habr.com/ru/auth/login/" class="footer-menu__item-link">Войти</a>
          </li>
          <li class="footer-menu__item">
            <a href="https://habr.com/ru/auth/register/" class="footer-menu__item-link">Регистрация</a>
          </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Разделы</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/posts/top/" class="footer-menu__item-link">Публикации</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/news/" class="footer-menu__item-link">Новости</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/hubs/" class="footer-menu__item-link">Хабы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/companies/" class="footer-menu__item-link">Компании</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/users/" class="footer-menu__item-link">Пользователи</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/sandbox/" class="footer-menu__item-link">Песочница</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Информация</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/docs/help/" class="footer-menu__item-link">Устройство сайта</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/docs/authors/" class="footer-menu__item-link">Для авторов</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/docs/companies/" class="footer-menu__item-link">Для компаний</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/docs/docs/" class="footer-menu__item-link">Документы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://account.habr.com/info/agreement/?hl=ru_RU" class="footer-menu__item-link">Соглашение</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://account.habr.com/info/confidential/?hl=ru_RU" class="footer-menu__item-link">Конфиденциальность</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Услуги</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a
            href="https://company.habr.com/corporate-blogs/"
            target="_blank"
            class="footer-menu__item-link"
          >Корпоративный блог</a>
        </li>
        <li class="footer-menu__item">
          <a
            href="https://company.habr.com/advertising/"
            target="_blank"
            class="footer-menu__item-link"
          >Медийная реклама</a>
        </li>
        <li class="footer-menu__item">
          <a
            href="https://company.habr.com/native-special/"
            target="_blank"
            class="footer-menu__item-link"
          >Нативные проекты</a>
        </li>
        <li class="footer-menu__item">
          <a
            href="https://company.habr.com/education-programs/"
            target="_blank"
            class="footer-menu__item-link"
          >Образовательные программы</a>
        </li>
        <li class="footer-menu__item">
          <a
            href="https://company.habr.com/hello-startup/"
            target="_blank"
            class="footer-menu__item-link"
          >Стартапам</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/ru/megaprojects/" target="_blank" class="footer-menu__item-link">Спецпроекты</a>
        </li>
      </ul>
    </div>
  </div>
</div>


        </div>
      </div>

      <div class="layout__row layout__row_footer">
        <div class="layout__cell">
          <script>
  $(document).ready(function () {
    window.voteReasonsList = JSON.parse('{"1":{"id":"1","title":"Низкий технический уровень материала","order":1},"2":{"id":"2","title":"Больше рекламы, чем пользы","order":2},"3":{"id":"3","title":"Не соответствует тематике Хабра","order":3},"4":{"id":"4","title":"В тексте много ошибок и опечаток","order":4},"5":{"id":"5","title":"Пост небрежно оформлен","order":5},"6":{"id":"6","title":"Личная неприязнь к автору или компании","order":6},"7":{"id":"7","title":"В статье нет новой для меня информации","order":7},"8":{"id":"8","title":"Ничего не понял после прочтения","order":8},"22":{"id":"22","title":"Не согласен с изложенным","order":9},"42":{"id":"42","title":"Кликбейтный заголовок","order":10},"9":{"id":"9","title":"Другое","order":11}}');
    window.userVoteReasonsList = JSON.parse('{"24":{"id":"24","title":"Грубое общение","order":1},"26":{"id":"26","title":"Неконструктивное общение","order":2},"28":{"id":"28","title":"Политика или пропаганда","order":3},"30":{"id":"30","title":"Статья\/тема не для Хабра","order":4},"32":{"id":"32","title":"Распространение рекламы","order":5},"34":{"id":"34","title":"Плохое оформление, ошибки","order":6},"36":{"id":"36","title":"Придерживаюсь другой позиции","order":7},"38":{"id":"38","title":"Подозрительная активность","order":8},"40":{"id":"40","title":"Личная неприязнь","order":9}}');
  });
</script>
<script>

$(document).on('hljsUpdate', function () {
  if (typeof hljs === 'undefined') {
    initHighlightJS();
  } else {
    $('pre code').each(function (i, e) {
      hljs.highlightBlock(e, '    ');
    });
  }
})

function createScript(url) {
  var hljsScript = document.createElement("script");
  hljsScript.src = url;
  hljsScript.type = 'text/javascript';
  document.body.appendChild(hljsScript)

  return hljsScript;
}

function initHighlightJS() {
  if (typeof hljs !== 'undefined') {
    $('pre code').each(function (i, e) {
      hljs.highlightBlock(e, '    ');
    });
    return;
  };

  var hljsScript = createScript('https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/highlight.pack.js');

  hljsScript.onload = function() {
    var hljsLangs = createScript('https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/highlight.langs.js');
    hljsLangs.onload = function () {
      hljs.initHighlighting();
    }
  }
}


var codeElements = document.querySelectorAll('pre code');

if (codeElements.length) {
  initHighlightJS();
}

</script>

<script>
function createScript(url) {
  var swiperScript = document.createElement("script");
  swiperScript.src = url;
  swiperScript.type = 'text/javascript';
  document.body.appendChild(swiperScript)

  return swiperScript;
}

function initGallerySliders() {

  const allGalleries = document.getElementsByClassName('gallery-wrapper');
  const allGalleriesList = [].slice.call(allGalleries);

  var sliders = [];
  var slidersThumbs = [];

  allGalleriesList.forEach((galleryWrapper) => {
    const newThumbsSwiper = new Swiper(galleryWrapper.querySelector('.thumb-gallery'), {
      spaceBetween: 12,
      slidesPerView: 'auto',
      freeMode: true,
      threshold: 10,
      multipleActiveThumbs: false,
      watchSlidesProgress: true,
      observer: true,
      navigation: {
        nextEl: '.swiper-next',
        prevEl: '.swiper-prev',
      },
    });
    slidersThumbs.push(newThumbsSwiper);

    const newSwiper = new Swiper(galleryWrapper.querySelector('.gallery'), {
      // loop: true,
      slidesPerView: 1,
      spaceBetween: 0,
      observer: true,
      observeParents: true,
      watchSlidesProgress: true,
      navigation: {
        nextEl: '.swiper-next',
        prevEl: '.swiper-prev',
      },

      thumbs: {
        swiper: newThumbsSwiper,
      },
    });
    sliders.push(newSwiper);
  });
};


const arrowIcon = '<svg viewbox="0 0 24 24" width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C6.90237 12.3166 6.90237 11.6834 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z" /></svg>';

function changeGalleriesLayout(allGalleriesList, doc) {
  allGalleriesList.forEach((gallery) => {
    const galleryWrapper = doc.createElement('div');
    galleryWrapper.setAttribute('class', 'gallery-wrapper');

    const mainGallery = gallery.cloneNode(true);

    // main gallery
    const leftArrow = doc.createElement('div');
    leftArrow.innerHTML = arrowIcon;
    leftArrow.setAttribute('class', 'swiper-prev');

    const rightArrow = doc.createElement('div');
    rightArrow.setAttribute('class', 'swiper-next');
    rightArrow.innerHTML = arrowIcon;

    mainGallery.appendChild(leftArrow);
    mainGallery.appendChild(rightArrow);

    const galleryContent = mainGallery.firstChild;
    galleryContent.setAttribute('class', 'swiper-wrapper');
    const allSlides = mainGallery.getElementsByTagName('figure');
    const allSlidesList = [].slice.call(allSlides);
    allSlidesList.forEach((slide) => {
      slide.setAttribute('class', 'swiper-slide');
      slide.firstChild.setAttribute('class', 'swiper-image');
    });

    // thumbnails gallery
    const thumbGallery = mainGallery.cloneNode(true);
    thumbGallery.setAttribute('class', 'thumb-gallery');
    const allThumbsSlides = thumbGallery.getElementsByTagName('figure');
    const allThumbsSlidesList = [].slice.call(allThumbsSlides);
    allThumbsSlidesList.forEach((slide) => {
      slide.firstChild.setAttribute('class', 'swiper-thumb-image swiper-image');
      slide.removeChild(slide.lastChild);
    });
    // doc.insertBefore(thumbGallery, mainGallery);

    galleryWrapper.appendChild(thumbGallery);
    galleryWrapper.appendChild(mainGallery);

    gallery.parentNode.replaceChild(galleryWrapper, gallery);
  });
}

function initSwiper() {
  const allGalleriesList = [].slice.call(galleryElements);
  changeGalleriesLayout(allGalleriesList, document);
  initGallerySliders();
};

function initGalleries() {
  var swiperScr = createScript('https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/swiper.js');

  swiperScr.onload = function() {
    initSwiper();
  }
}


var galleryElements = document.querySelectorAll('.post__text .gallery');

if (galleryElements.length) {
  initGalleries();
}

</script>

<script>

var mathElements = document.getElementsByTagName('math');

function mathJaxConfig() {
  MathJax.Hub.Config({
    showProcessingMessages: false,
    showMathMenu: true,
    tex2jax: {
      inlineMath: [['$inline$','$inline$']],
      displayMath: [['$$display$$','$$display$$']],
      processEscapes: true
    },
    MathMenu: {
      showRenderer: true,
      showContext:  true
    }
  });

  MathJax.Extension.Img2jax = {
    PreProcess: function (element) {
      var hasMath = false;
      var images = element.querySelectorAll('[data-tex]');
      for (var i = images.length - 1; i >= 0; i--) {
        var img = images[i];
        var tex = img.alt.replace(/(\r\n|\n|\r)/gm, " ");
        if (tex && tex[0] === '$'){
          var script = document.createElement("script"); script.type = "math/tex";
          hasMath = true;
          if (img.getAttribute('data-tex') == "display"){script.type += ";mode=display"}
          MathJax.HTML.setScript(script, tex.substring(1,tex.length-1));
          img.parentNode.replaceChild(script,img);
        }
      }
    }
  };

  MathJax.Hub.Register.PreProcessor(["PreProcess", MathJax.Extension.Img2jax]);
}

function mathjaxInit() {
 if (typeof MathJax === 'undefined') {
    var url = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_SVG-full&locale=ru';
    var mathScript = document.createElement("script");
    mathScript.src = url;
    mathScript.type = 'text/javascript';
    document.body.appendChild(mathScript)

    mathScript.onload = function() {
      mathJaxConfig();
    }
  } else {
    mathJaxConfig();
  }
}

if (mathElements.length) {
  mathjaxInit();
}

</script>
<div class="footer-grid footer">
  <div class="footer-grid__item footer-grid__item_copyright">
    <span class="footer__copyright">&copy; 2006 &ndash; 2023 «<a href="https://company.habr.com/" class="footer__link">Habr</a>»</span>
  </div>
  <div class="footer-grid__item footer-grid__item_link footer-grid__item_lang">
    <svg class="icon-svg icon-svg_lang-footer" width="16" height="16">
      <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#globus-v2" />
    </svg>
    <a href="#" class="footer__link js-show_lang_settings">Настройка языка</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
    <a href="https://habr.com/ru/feedback/" class="footer__link">Служба поддержки</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
    <a href="/berserk-mode-yarr" class="footer__link">Перейти на новую версию</a>
  </div>

  <div class="footer-grid__item footer-grid__item_social">
    <ul class="social-icons">
      <li class="social-icons__item">
        <a href="https://twitter.com/habr_com"
          class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_twitter"
          target="_blank"
          rel="nofollow noopener noreferrer"
          onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'twitter'); }"
        >
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.414 8.642c-.398.177-.826.296-1.276.35.459-.275.811-.71.977-1.229-.43.254-.905.439-1.41.539-.405-.432-.982-.702-1.621-.702-1.227 0-2.222.994-2.222 2.222 0 .174.019.344.058.506-1.846-.093-3.484-.978-4.579-2.322-.191.328-.301.71-.301 1.117 0 .77.392 1.45.988 1.849-.363-.011-.706-.111-1.006-.278v.028c0 1.077.766 1.974 1.782 2.178-.187.051-.383.078-.586.078-.143 0-.282-.014-.418-.04.282.882 1.103 1.525 2.075 1.542-.76.596-1.718.951-2.759.951-.179 0-.356-.01-.53-.031.983.63 2.15.998 3.406.998 4.086 0 6.321-3.386 6.321-6.321l-.006-.287c.433-.314.81-.705 1.107-1.15z"/></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://www.facebook.com/habrahabr.ru"
          class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_facebook"
          target="_blank"
          rel="nofollow noopener noreferrer"
          onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'facebook'); }"
        >
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.889 8.608h-1.65c-.195 0-.413.257-.413.6v1.192h2.063v1.698h-2.063v5.102h-1.948v-5.102h-1.766v-1.698h1.766v-1c0-1.434.995-2.6 2.361-2.6h1.65v1.808z"/></svg>
        </a>
      </li>
        <li class="social-icons__item">
          <a href="https://vk.com/habr"
            class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_vkontakte"
            target="_blank"
            rel="nofollow noopener noreferrer"
            onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'vkontakte'); }"
          >
            <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M16.066 11.93s1.62-2.286 1.782-3.037c.054-.268-.064-.418-.343-.418h-1.406c-.322 0-.44.139-.537.343 0 0-.76 1.619-1.685 2.64-.297.33-.448.429-.612.429-.132 0-.193-.11-.193-.408v-2.607c0-.365-.043-.472-.343-.472h-2.254c-.172 0-.279.1-.279.236 0 .343.526.421.526 1.352v1.921c0 .386-.022.537-.204.537-.483 0-1.631-1.663-2.274-3.552-.129-.386-.268-.494-.633-.494h-1.406c-.204 0-.354.139-.354.343 0 .375.44 2.114 2.167 4.442 1.159 1.566 2.683 2.414 4.056 2.414.838 0 1.041-.139 1.041-.494v-1.202c0-.301.118-.429.29-.429.193 0 .534.062 1.33.848.945.901 1.01 1.276 1.525 1.276h1.578c.161 0 .311-.075.311-.343 0-.354-.462-.987-1.17-1.738-.29-.386-.762-.805-.912-.998-.215-.226-.151-.354-.001-.59z"/></svg>
          </a>
        </li>
      <li class="social-icons__item">
        <a href="https://telegram.me/habr_com"
          class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_telegram"
          target="_blank"
          rel="nofollow noopener noreferrer"
          onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'telegram'); }"
        >
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.17 7.621l-10.498 3.699c-.169.059-.206.205-.006.286l2.257.904 1.338.536 6.531-4.796s.189.057.125.126l-4.68 5.062-.27.299.356.192 2.962 1.594c.173.093.397.016.447-.199.058-.254 1.691-7.29 1.728-7.447.047-.204-.087-.328-.291-.256zm-6.922 8.637c0 .147.082.188.197.084l1.694-1.522-1.891-.978v2.416z"/></svg>
        </a>
      </li>
        <li class="social-icons__item">
          <a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w"
            class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_youtube"
            target="_blank"
            rel="nofollow noopener noreferrer"
            onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'youtube'); }"
          >
            <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="32" height="32" viewBox="0 0 32 32"><path d="M3.2 0h25.6c1.767 0 3.2 1.433 3.2 3.2v25.6c0 1.767-1.433 3.2-3.2 3.2h-25.6c-1.767 0-3.2-1.433-3.2-3.2v-25.6c0-1.767 1.433-3.2 3.2-3.2zm18.133 16l-10.667-5.333v10.667l10.667-5.333z"/></svg>

          </a>
        </li>
        <li class="social-icons__item">
          <a href="https://zen.yandex.ru/habr"
            class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_zen"
            target="_blank"
            rel="nofollow noopener noreferrer"
            onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'zen'); }"
          >
            <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="30" height="30" rx="3" fill="#2C3036"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M26.25 15.1241V14.9998V14.8759C21.2684 14.7252 18.9904 14.6009 17.1735 12.8263C15.3994 11.0098 15.2747 8.73179 15.1243 3.75H15H14.8757C14.7253 8.73179 14.6006 11.0098 12.8264 12.8263C11.0095 14.6009 8.73151 14.7252 3.75 14.8759V14.9998V15.1241C8.73151 15.2748 11.0095 15.3991 12.8264 17.1733C14.6006 18.9903 14.7253 21.2682 14.8757 26.25H15H15.1243C15.2747 21.2682 15.3994 18.9903 17.1735 17.1733C18.9904 15.3991 21.2684 15.2748 26.25 15.1241Z" fill="white"/>
</svg>

          </a>
        </li>
    </ul>
  </div>
</div>

        </div>
      </div>

      <a href="#" class="layout__elevator hidden" id="scroll_to_top" title="Наверх"  onclick="if (typeof ga === 'function') { ga('send', 'event', 'navigation_button', 'down'); }">
        <svg class="icon-svg icon-svg_scroll-up" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" version="1.1" role="img"><path d="M16 0C7.164 0 0 7.164 0 16s7.164 16 16 16 16-7.164 16-16S24.836 0 16 0zm8.412 19.523c-.517.512-1.355.512-1.872 0L16 13.516l-6.54 6.01c-.518.51-1.356.51-1.873 0-.516-.513-.517-1.343 0-1.855l7.476-7.326c.517-.512 1.356-.512 1.873 0l7.476 7.327c.516.513.516 1.342 0 1.854z"/></svg>
      </a>
    </div>

    <div class="overlay hidden" id="js-lang_settings">
  <div class="popup">
    <div class="popup__head popup__head_lang-settings">
      <span class="popup__head-title js-popup_title" data-section="1">Настройка языка</span>
      <button type="button" class="btn btn_small btn_popup-close js-hide_lang_settings">
        <svg class="icon-svg" width="12" height="12">
          <use xlink:href="https://habr.com/oldassets/6411ba2a/images/common-svg-sprite.svg#close" />
        </svg>
      </button>
    </div>
    <div class="popup__body">
      <form action="/json/settings/i18n/" method="post" class="form form_lang-settings" id="lang-settings-form">
        <fieldset class="form__fieldset form__fieldset_thin" data-section="2">
          <legend class="form__legend form__legend_lang-settings js-popup_hl_legend">Интерфейс</legend>
            <div class="form-field form-field_lang-settings">
              <span class="radio radio_custom ">
                <input type="radio" name="hl" id="hl_langs_ru" class="radio__input js-hl_langs" value="ru" checked>
                <label for="hl_langs_ru" class="radio__label radio__label_another">Русский</label>
              </span>
            </div>
            <div class="form-field form-field_lang-settings">
              <span class="radio radio_custom ">
                <input type="radio" name="hl" id="hl_langs_en" class="radio__input js-hl_langs" value="en" >
                <label for="hl_langs_en" class="radio__label radio__label_another">English</label>
              </span>
            </div>
        </fieldset>

        <fieldset class="form__fieldset form__fieldset_thin">
          <legend class="form__legend form__legend_lang-settings js-popup_fl_legend" data-section="3">Язык публикаций</legend>
            <div class="form-field form-field_lang-settings">
              <span class="checkbox checkbox_custom">
                <input type="checkbox" name="fl[]" id="fl_langs_ru" class="checkbox__input js-fl_langs" value="ru" checked>
                <label for="fl_langs_ru" class="checkbox__label checkbox__label_another js-popup_feed_ru">Русский</label>
              </span>
            </div>
            <div class="form-field form-field_lang-settings">
              <span class="checkbox checkbox_custom">
                <input type="checkbox" name="fl[]" id="fl_langs_en" class="checkbox__input js-fl_langs" value="en" >
                <label for="fl_langs_en" class="checkbox__label checkbox__label_another js-popup_feed_en">Английский</label>
              </span>
            </div>
        </fieldset>

        <div class="form__footer form__footer_lang-settings">
          <button type="submit" class="btn btn_blue btn_huge btn_full-width js-popup_save_btn">Сохранить настройки</button>
        </div>
      </form>
    </div>
  </div>
</div>



    <script>
  function composeTeaser(t, blockType) {
    const listener = " onclick=\"if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'promo,"
      + blockType + "', '"+ t.linkUrl +"'); }\"";
    let teaser = '<li class="megapost-teasers__item teaser">'
    + '<a href="' + t.linkUrl + '" target="_blank" class="teaser__image" rel="nofollow';

    if (t.external) teaser += ' sponsored';

    teaser += '"';

    teaser += listener;

    teaser += '>'
    + '<img src="' + t.imageUrl + '" class="teaser__image-pic"/>'
    + '<div class="megapost-teasers__label">'
    + t.label;

    if (t.external) teaser += `<svg width="11" height="11" viewBox="0 0 11 11" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.5 0C7.22386 0 7 0.223858 7 0.5C7 0.776142 7.22386 1 7.5 1H9.29289L5.14645 5.14645C4.95118 5.34171 4.95118 5.65829 5.14645 5.85355C5.34171 6.04882 5.65829 6.04882 5.85355 5.85355L10 1.70711V3.5C10 3.77614 10.2239 4 10.5 4C10.7761 4 11 3.77614 11 3.5V0.5C11 0.223858 10.7761 0 10.5 0H7.5ZM0.5 1C0.223858 1 0 1.22386 0 1.5V10.5C0 10.7761 0.223858 11 0.5 11H9.5C9.77614 11 10 10.7761 10 10.5V6C10 5.72386 9.77614 5.5 9.5 5.5C9.22386 5.5 9 5.72386 9 6V10H1V2H5C5.27614 2 5.5 1.77614 5.5 1.5C5.5 1.22386 5.27614 1 5 1H0.5Z" fill="#6667A2"/>
</svg>
`;

    teaser += '</div></a>'
    + '<a href="' + t.linkUrl + '" target="_blank" class="teaser__body" rel="nofollow';

    if (t.external) teaser += ' sponsored';

    teaser += '"';

    teaser += listener;

    teaser += '>'
    + '<h3 class="teaser__body-title">'
    + t.title
    + '</h3></a></li>';

    return teaser;
  }
</script>
    <script type="text/javascript">
  // global vars
  var g_base_url = 'habr.com/ru';
  var g_base_fullurl = 'https://habr.com/ru/';
  var g_tmid_fullurl = 'https://account.habr.com/';
  var g_is_guest = false;
  var g_show_xpanel = false;
  var g_is_enableShortcuts = '1';
  var g_is_ugc_post = '1';
  var g_is_company_post = '';
  var g_current_hl = 'ru';
  var g_current_fl = 'ru';

</script>

    <script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/vendors.bundle.js"></script>
    <script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/main.bundle.js"></script>
        <script src="https://hsto.org/getpro/neuro-habr/2.1.1/neuro-habr.js"></script>

  <script>
  if (window.fetch) {
    var nh = window.neuroHabr;
    var host = 'https://b2b.ainews.kz/api';

    var projectId = '';
    var widgetId = '';

    nh.init(host, projectId, widgetId);

    var articleId = "680376";
    var articleLang = "ru";
    var articleCanonical = document.querySelector("link[rel='canonical']").getAttribute("href");

    if (articleId) {
      nh.send('p_view', articleId, articleCanonical, articleLang);
    }

    var nhState = {
      viewTime: 0,
      interval: null,
      scrolledDown: false,
      likeSent: false,
    };

    var hidden;
    var visibilityChange;

    if (typeof document.hidden !== 'undefined') { // Opera 12.10 and Firefox 18 and later support
      hidden = 'hidden';
      visibilityChange = 'visibilitychange';
    } else if (typeof document.msHidden !== 'undefined') {
      hidden = 'msHidden';
      visibilityChange = 'msvisibilitychange';
    } else if (typeof document.webkitHidden !== 'undefined') {
      hidden = 'webkitHidden';
      visibilityChange = 'webkitvisibilitychange';
    }


    var articleBody = document.querySelector('.post__body') || document.querySelector('.article__body');

    if (articleBody) {
      var MINIMUM_ARTICLE_READ_SECONDS = 10;

      var isInViewport = function(e) {
        if (!e) return false;
        var b = e.getBoundingClientRect();
        return b.top <= window.innerHeight && b.top + b.height >= 0;
      };

      var isAtTheEnd = function(e) {
        if (!e) return false;
        return e.getBoundingClientRect().bottom - window.innerHeight <= 0;
      };

      var hasReadArticle = function() {
        return nhState.scrolledDown && nhState.viewTime >= MINIMUM_ARTICLE_READ_SECONDS;
      };

      function incrementViewTime(e) {
        if (!nhState.likeSent && !nhState.interval) {
          nhState.interval = setInterval(() => {
            if (hasReadArticle()) {
              if (!nhState.likeSent) {
                nhState.likeSent = true;
                nh.send('p_like', articleId, articleCanonical, articleLang);
              }
              clearInterval(nhState.interval);
              nhState.interval = null;
            } else if (isInViewport(e)) {
              nhState.viewTime += 2;
            }
          }, 2000);
        }
      };

      incrementViewTime(articleBody);

      if (typeof document.addEventListener !== 'undefined' && hidden !== undefined) {
        document.addEventListener(visibilityChange, () => {
          if (!hasReadArticle() && !nhState.likeSent) {
            if (document[hidden]) {
              clearInterval(nhState.interval);
              nhState.interval = null;
            } else {
              incrementViewTime(articleBody);
            }
          }
        });

        document.addEventListener('scroll', () => {
          if (!nhState.scrolledDown) {
            if (isAtTheEnd(articleBody)) {
              nhState.scrolledDown = true;
            }
          }
        });
      } else {
        nhState.scrolledDown = true;
      }
    }
  }
  </script>



      <script src="https://dr.habracdn.net/habr/oldassets/6411ba2a/javascripts/check-login.js"></script>
      <script type="text/javascript" src="https://habr.com/ru/viewcount/post/680376/"></script>

    
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function(m,e,t,r,i,k,a){
  m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
  m[i].l=1*new Date();
  k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
})(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      clickmap:true
      , trackLinks:true
      , accurateTrackBounce:true
    });
</script>
<noscript>
  <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
  </div>
</noscript>
<!-- /Yandex.Metrika counter -->

    <script type="text/javascript">
  function stripUrl(currentUrl, queryParam) {
   return currentUrl.replace(/\?([^#]*)/, function(_, search) {
      var result = search.split('&').map(function(param) {
        var regexp = new RegExp(`^${queryParam}`);
        if (regexp.test(param)) {
          return '';
        }
        return param;
      }).filter(Boolean).join('&');
      return result ? '?' + result : '';
    });
  }

  (function() {
    if (location.search.indexOf('cv') != -1 && history.replaceState) {
      var currentUrl = location.toString();
      var strippedUrl = stripUrl(currentUrl, 'cv');
      history.replaceState({}, '', strippedUrl);
    }
  })();

  function callGA(usesABP) {
    if (typeof window.adb1 === 'undefined') { window.adb1 = 'yes';}
    if (usesABP) { window.adb1 = 'aa'; }

    var user_type = 'guest';

    var page_type = "publish_ugc_ru,h_91,h_397,h_7026,h_17690,h_21370,f_develop";

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-726094-1',  'auto');
        ga('create', 'UA-726094-24', 'auto', {'name': 'HGM', 'allowLinker': true});

    ga('HGM.require', 'linker');
    ga('HGM.linker:autoLink', ['toster.ru', 'habr.com', 'account.habr.com', 'm.habr.com']);

    ga('require', 'displayfeatures');
    ga('set', 'dimension1', user_type); // user type - guest/readonly/habrauser
    ga('set', 'dimension2', page_type);
    ga('set', 'dimension3', 'na');
    ga('set', 'dimension4', window.adb1);
    ga('set', 'dimension6', 'ru');
    ga('set', 'dimension7', 'oldtop');


    (function() {
      var removeUtms = function(){
        var location = window.location;
        if (location.search.indexOf('utm_') != -1 && history.replaceState) {
          var currentUrl = location.toString();
          var strippedUrl = stripUrl(currentUrl, 'utm_');
          history.replaceState({}, '', strippedUrl);
        }
      };
      ga('require', 'GTM-559GVC8');
      ga('send', 'pageview', { 'hitCallback': removeUtms });
    })();

    ga('HGM.set', 'dimension1', user_type);
    ga('HGM.set', 'dimension2', "habrahabr");
    ga('HGM.set', 'dimension4', window.adb1);

    ga('HGM.send', 'pageview');
  }


  if (window.habr_blockers_checker) {
    window.habr_blockers_checker.detectWrapper(callGA);
  } else {
    callGA(false)
  }

</script>

    <!-- Facebook Pixel Code -->
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=317458588730613&ev=PageView&noscript=1"/>
<!-- End Facebook Pixel Code -->

    <img src="https://vk.com/rtrg?p=VK-RTRG-421343-57vKE" style="position:fixed; left:-999px;" alt=""/>
    
  </body>
</html>
